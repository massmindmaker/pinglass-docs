<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PinGlass - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è v6.0</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --pink-500: #ec4899;
            --pink-600: #db2777;
            --pink-100: #fce7f3;
            --coral-500: #FF6B6B;
            --coral-600: #B83232;
            --purple-500: #9B7BFF;
            --purple-100: #f3e8ff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --green-500: #22c55e;
            --green-100: #dcfce7;
            --amber-500: #f59e0b;
            --amber-100: #fef3c7;
            --blue-500: #3b82f6;
            --blue-100: #dbeafe;
            --red-500: #ef4444;
            --red-100: #fee2e2;
            --yellow-500: #eab308;
            --slate-50: #f8fafc;
            --slate-100: #f1f5f9;
            --slate-200: #e2e8f0;
            --slate-500: #64748b;
            --slate-600: #475569;
            --slate-800: #1e293b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background: var(--gray-50);
        }

        /* ===== NAVIGATION ===== */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 260px;
            height: 100vh;
            background: white;
            border-right: 1px solid var(--gray-200);
            padding: 20px 15px;
            overflow-y: auto;
            z-index: 100;
        }

        nav h1 { color: var(--coral-600); font-size: 1.4rem; margin-bottom: 3px; }
        nav .version { font-size: 0.7rem; color: var(--gray-500); margin-bottom: 20px; }
        nav ul { list-style: none; }
        nav ul li { margin-bottom: 2px; }
        nav ul li a {
            display: block;
            padding: 7px 10px;
            color: var(--gray-600);
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.8rem;
            transition: all 0.15s;
        }
        nav ul li a:hover { background: var(--pink-100); color: var(--coral-600); }
        nav ul li a.active { background: var(--coral-500); color: white; }
        nav .section-title {
            font-weight: 600;
            color: var(--gray-800);
            margin-top: 15px;
            margin-bottom: 6px;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* ===== MAIN CONTENT ===== */
        main {
            margin-left: 260px;
            padding: 30px;
            max-width: 1200px;
        }

        section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }

        h2 {
            color: var(--gray-900);
            font-size: 1.5rem;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--coral-500);
        }

        h3 { color: var(--gray-800); font-size: 1.15rem; margin-top: 20px; margin-bottom: 12px; }
        h4 { color: var(--gray-700); font-size: 0.95rem; margin-top: 15px; margin-bottom: 8px; }
        p { margin-bottom: 12px; color: var(--gray-600); font-size: 0.9rem; }
        ul, ol { margin-bottom: 12px; padding-left: 22px; }
        li { margin-bottom: 5px; color: var(--gray-600); font-size: 0.9rem; }

        /* ===== TABLES ===== */
        table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 0.85rem; }
        th, td { padding: 10px 12px; text-align: left; border-bottom: 1px solid var(--gray-200); }
        th { background: var(--gray-100); font-weight: 600; color: var(--gray-800); }
        tr:hover { background: var(--gray-50); }

        /* ===== CODE ===== */
        code {
            background: var(--gray-100);
            padding: 2px 5px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8em;
            color: var(--coral-600);
        }

        pre {
            background: var(--gray-900);
            color: #e5e7eb;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 12px 0;
            font-size: 0.8rem;
        }

        pre code { background: none; padding: 0; color: inherit; }

        /* ===== BADGES ===== */
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .badge-pink { background: var(--pink-100); color: var(--coral-600); }
        .badge-green { background: var(--green-100); color: #059669; }
        .badge-blue { background: var(--blue-100); color: #2563eb; }
        .badge-yellow { background: var(--amber-100); color: #d97706; }
        .badge-red { background: var(--red-100); color: #dc2626; }
        .badge-purple { background: var(--purple-100); color: #9333ea; }
        .badge-slate { background: var(--slate-100); color: var(--slate-600); }

        /* ===== CARDS & GRIDS ===== */
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 15px 0; }
        .card { background: var(--gray-50); border-radius: 10px; padding: 15px; border: 1px solid var(--gray-200); }
        .card h4 { margin-top: 0; color: var(--coral-600); }

        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 15px 0; }
        .stat {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, var(--coral-500), var(--coral-600));
            border-radius: 10px;
            color: white;
        }
        .stat-value { font-size: 1.75rem; font-weight: 700; }
        .stat-label { font-size: 0.8rem; opacity: 0.9; }

        /* ===== TABS ===== */
        .tabs-row { display: flex; gap: 6px; margin: 10px 0; flex-wrap: wrap; }
        .tab-badge {
            background: var(--pink-100);
            color: var(--coral-600);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .tab-badge.active { background: var(--coral-500); color: white; }

        /* ===== MERMAID ===== */
        .mermaid { background: white; padding: 15px; border-radius: 8px; margin: 15px 0; }

        /* ===== FEATURE BOXES ===== */
        .feature-box {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            padding: 18px;
            margin: 12px 0;
        }
        .feature-box h4 { color: var(--coral-600); margin-top: 0; margin-bottom: 10px; }

        /* ===== PHONE MOCKUPS ===== */
        .mockup-container {
            background: var(--gray-100);
            border-radius: 16px;
            padding: 20px;
            margin: 15px 0;
        }
        .mockup-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-500);
            margin-bottom: 10px;
            font-weight: 600;
        }
        .mockup-row {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .phone-frame {
            width: 280px;
            min-width: 280px;
            background: white;
            border-radius: 32px;
            padding: 8px;
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.2);
            border: 6px solid var(--gray-900);
        }
        .phone-screen {
            background: white;
            border-radius: 24px;
            overflow: hidden;
            min-height: 480px;
            position: relative;
        }
        .phone-notch {
            width: 100px;
            height: 24px;
            background: var(--gray-900);
            border-radius: 0 0 14px 14px;
            margin: 0 auto;
        }

        /* Phone content styles */
        .phone-header {
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--gray-100);
        }
        .phone-header .back-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--gray-100);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-600);
            font-size: 1rem;
        }
        .phone-header h1 { font-size: 1rem; font-weight: 600; color: var(--gray-900); }
        .phone-content { padding: 15px; padding-bottom: 70px; }
        .phone-cta {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 12px 15px;
            background: rgba(255,255,255,0.95);
            border-top: 1px solid var(--gray-100);
        }
        .phone-btn {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
        }
        .phone-btn-primary {
            background: linear-gradient(135deg, var(--coral-500), var(--pink-500));
            color: white;
        }
        .phone-btn-disabled {
            background: var(--gray-200);
            color: var(--gray-400);
        }

        /* ===== ADMIN MOCKUPS ===== */
        .admin-mockup {
            background: white;
            border-radius: 12px;
            border: 1px solid var(--gray-200);
            overflow: hidden;
            margin: 15px 0;
        }
        .admin-header {
            padding: 12px 20px;
            background: white;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .admin-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: var(--gray-900);
        }
        .admin-logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--coral-500), var(--pink-500));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
        }
        .test-mode-badge {
            background: var(--amber-100);
            color: #b45309;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .admin-nav {
            display: flex;
            gap: 4px;
            padding: 0 15px;
            border-bottom: 1px solid var(--gray-200);
            overflow-x: auto;
        }
        .admin-nav-item {
            padding: 10px 14px;
            font-size: 0.8rem;
            color: var(--gray-500);
            text-decoration: none;
            border-bottom: 2px solid transparent;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .admin-nav-item:hover { color: var(--gray-800); }
        .admin-nav-item.active {
            color: var(--gray-900);
            border-bottom-color: var(--pink-500);
            font-weight: 500;
        }

        .admin-content { padding: 20px; }

        /* KPI Cards */
        .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px; }
        .kpi-card {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: 10px;
            padding: 15px;
        }
        .kpi-label { font-size: 0.75rem; color: var(--gray-500); margin-bottom: 5px; }
        .kpi-value { font-size: 1.5rem; font-weight: 700; color: var(--gray-900); }
        .kpi-value.green { color: var(--green-500); }
        .kpi-value.blue { color: var(--blue-500); }
        .kpi-value.red { color: var(--red-500); }

        /* Admin tables */
        .admin-table { width: 100%; font-size: 0.8rem; }
        .admin-table th { background: var(--gray-50); font-weight: 500; padding: 10px 12px; }
        .admin-table td { padding: 10px 12px; vertical-align: middle; }
        .admin-table .status-badge {
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 500;
        }
        .status-succeeded { background: var(--green-100); color: #059669; }
        .status-pending { background: var(--amber-100); color: #b45309; }
        .status-failed { background: var(--red-100); color: #dc2626; }
        .status-processing { background: var(--blue-100); color: #2563eb; }

        /* Provider badges */
        .provider-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 500;
        }
        .provider-tbank { background: #fff7ed; color: #ea580c; }
        .provider-stars { background: #fefce8; color: #ca8a04; }
        .provider-ton { background: #eff6ff; color: #2563eb; }

        /* Progress bars */
        .progress-bar {
            height: 6px;
            background: var(--gray-200);
            border-radius: 3px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s;
        }
        .progress-fill.green { background: var(--green-500); }
        .progress-fill.blue { background: var(--blue-500); }
        .progress-fill.red { background: var(--red-500); }

        /* Filters */
        .filters-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .filter-select {
            padding: 6px 10px;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            font-size: 0.8rem;
            background: white;
        }
        .filter-input {
            padding: 6px 10px;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            font-size: 0.8rem;
            width: 200px;
        }

        /* Action buttons */
        .btn-sm {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
        }
        .btn-primary { background: var(--coral-500); color: white; }
        .btn-secondary { background: var(--gray-100); color: var(--gray-700); }
        .btn-danger { background: var(--red-100); color: var(--red-500); }
        .btn-success { background: var(--green-100); color: #059669; }

        /* Responsive */
        @media (max-width: 768px) {
            nav { width: 100%; height: auto; position: relative; }
            main { margin-left: 0; }
            .stats-grid, .kpi-grid { grid-template-columns: repeat(2, 1fr); }
            .mockup-row { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
    <nav>
        <h1>PinGlass</h1>
        <div class="version">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è v6.1 (Jan 2026)</div>

        <div class="section-title">–û–±–∑–æ—Ä</div>
        <ul>
            <li><a href="#about" class="active">–û –ø—Ä–æ–µ–∫—Ç–µ</a></li>
            <li><a href="#architecture">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</a></li>
            <li><a href="#tech-stack">–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π</a></li>
        </ul>

        <div class="section-title">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
        <ul>
            <li><a href="#user-flow">User Flow</a></li>
            <li><a href="#ui-onboarding">Onboarding</a></li>
            <li><a href="#ui-upload">Upload</a></li>
            <li><a href="#ui-tier-select">–í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞</a></li>
            <li><a href="#ui-results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</a></li>
            <li><a href="#ui-avatar-detail">–î–µ—Ç–∞–ª–∏ –∞–≤–∞—Ç–∞—Ä–∞</a></li>
            <li><a href="#ui-payment">–û–ø–ª–∞—Ç–∞</a></li>
            <li><a href="#ui-referral">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å</a></li>
        </ul>

        <div class="section-title">Backend</div>
        <ul>
            <li><a href="#async-generation">Async –≥–µ–Ω–µ—Ä–∞—Ü–∏—è</a></li>
            <li><a href="#qstash">QStash –æ—á–µ—Ä–µ–¥–∏</a></li>
            <li><a href="#payments">–ü–ª–∞—Ç–µ–∂–∏</a></li>
            <li><a href="#cron-jobs">Cron Jobs</a></li>
        </ul>

        <div class="section-title">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</div>
        <ul>
            <li><a href="#security">–ó–∞—â–∏—Ç–∞</a></li>
            <li><a href="#idempotency">–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</a></li>
            <li><a href="#rate-limiting">Rate Limiting</a></li>
        </ul>

        <div class="section-title">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</div>
        <ul>
            <li><a href="#admin-overview">–û–±–∑–æ—Ä (11 —Å–µ–∫—Ü–∏–π)</a></li>
            <li><a href="#admin-dashboard">Dashboard</a></li>
            <li><a href="#admin-users">Users</a></li>
            <li><a href="#admin-payments">Payments</a></li>
            <li><a href="#admin-generations">Generations</a></li>
            <li><a href="#admin-prompts">Prompts</a></li>
            <li><a href="#admin-referrals">Referrals</a></li>
            <li><a href="#admin-partners">Partners</a></li>
            <li><a href="#admin-telegram">Telegram</a></li>
            <li><a href="#admin-support">Support</a></li>
            <li><a href="#admin-logs">Logs</a></li>
            <li><a href="#admin-settings">Settings</a></li>
        </ul>

        <div class="section-title">API & –î–µ–ø–ª–æ–π</div>
        <ul>
            <li><a href="#api-user">User API</a></li>
            <li><a href="#api-payment">Payment API</a></li>
            <li><a href="#api-generation">Generation API</a></li>
            <li><a href="#api-referral">Referral API</a></li>
            <li><a href="#api-admin">Admin API</a></li>
            <li><a href="#components">–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</a></li>
            <li><a href="#pages">–°—Ç—Ä–∞–Ω–∏—Ü—ã</a></li>
            <li><a href="#environment">Environment</a></li>
            <li><a href="#deploy">–î–µ–ø–ª–æ–π</a></li>
        </ul>

        <div class="section-title">Updates Jan 2026</div>
        <ul>
            <li><a href="#test-branch">Test Branch</a></li>
            <li><a href="#partner-cabinet">Partner Cabinet</a></li>
            <li><a href="#edge-runtime">Edge Runtime</a></li>
            <li><a href="#ci-cd">CI/CD Pipeline</a></li>
        </ul>
    </nav>

    <main>
        <!-- ABOUT SECTION -->
        <section id="about">
            <h2>–û –ø—Ä–æ–µ–∫—Ç–µ PinGlass</h2>
            <p><strong>PinGlass</strong> (—Ä–æ–∑–æ–≤—ã–µ –æ—á–∫–∏) ‚Äî Telegram Mini App –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI-—Ñ–æ—Ç–æ–ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç 5-8 —Å–≤–æ–∏—Ö —Ñ–æ—Ç–æ –∏ –ø–æ–ª—É—á–∞—é—Ç –¥–æ 23 –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö AI-–ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∏–ª—è—Ö.</p>

            <div class="stats-grid">
                <div class="stat">
                    <div class="stat-value">23</div>
                    <div class="stat-label">AI —Ñ–æ—Ç–æ</div>
                </div>
                <div class="stat">
                    <div class="stat-value">3</div>
                    <div class="stat-label">–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –æ–ø–ª–∞—Ç—ã</div>
                </div>
                <div class="stat">
                    <div class="stat-value">11</div>
                    <div class="stat-label">—Å–µ–∫—Ü–∏–π –∞–¥–º–∏–Ω–∫–∏</div>
                </div>
                <div class="stat">
                    <div class="stat-value">50%</div>
                    <div class="stat-label">–∫–æ–º–∏—Å—Å–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤</div>
                </div>
            </div>

            <div class="card-grid">
                <div class="card">
                    <h4>AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤</h4>
                    <p>Kie.ai (primary) + Replicate (fallback). –î–æ 23 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ç–æ –∑–∞ —Å–µ—Å—Å–∏—é. Async generation —á–µ—Ä–µ–∑ QStash.</p>
                </div>
                <div class="card">
                    <h4>–ú—É–ª—å—Ç–∏-–ø–ª–∞—Ç–µ–∂–∏</h4>
                    <p>T-Bank (–∫–∞—Ä—Ç—ã), Telegram Stars, TON Crypto. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã, –∑–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π.</p>
                </div>
                <div class="card">
                    <h4>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h4>
                    <p>10% –∫–æ–º–∏—Å—Å–∏—è –æ–±—ã—á–Ω—ã–º, 50% –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º. –í—ã–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∫–µ.</p>
                </div>
                <div class="card">
                    <h4>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h4>
                    <p>11 —Å–µ–∫—Ü–∏–π: Dashboard, Users, Payments, Generations, Prompts, Referrals, Partners, Telegram, Support, Logs, Settings.</p>
                </div>
            </div>
        </section>

        <!-- ARCHITECTURE SECTION -->
        <section id="architecture">
            <h2>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h2>

            <div class="mermaid">
graph TB
    subgraph "Telegram Mini App"
        TMA[React 19 + Next.js 16]
    end

    subgraph "API Layer"
        API[Next.js API Routes]
    end

    subgraph "Payment Providers"
        TON[TON Crypto]
        STARS[Telegram Stars]
        TBANK[T-Bank]
    end

    subgraph "Async Processing"
        QSTASH[QStash Queue]
        CRON[Vercel Cron]
    end

    subgraph "AI Generation"
        KIE[Kie.ai Primary]
        REP[Replicate Fallback]
    end

    subgraph "Data Layer"
        R2[Cloudflare R2]
        NEON[Neon PostgreSQL]
    end

    subgraph "Middleware"
        MW[Rate Limit + Auth]
    end

    TMA --> API
    API --> MW
    MW --> TBANK
    MW --> STARS
    MW --> TON
    API --> QSTASH
    QSTASH --> KIE
    KIE -.->|fallback| REP
    KIE --> R2
    REP --> R2
    CRON --> API
    API --> NEON
    R2 --> TMA
            </div>
        </section>

        <!-- TECH STACK SECTION -->
        <section id="tech-stack">
            <h2>–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π</h2>

            <table>
                <thead>
                    <tr>
                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                        <th>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è</th>
                        <th>–í–µ—Ä—Å–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Frontend</td><td>React + Next.js (App Router)</td><td>19 / 16</td></tr>
                    <tr><td>Styling</td><td>Tailwind CSS (OKLCH)</td><td>4.0</td></tr>
                    <tr><td>Database</td><td>Neon PostgreSQL (serverless)</td><td>-</td></tr>
                    <tr><td>AI Primary</td><td>Kie.ai API</td><td>Async</td></tr>
                    <tr><td>AI Fallback</td><td>Replicate (Flux, InstantID)</td><td>-</td></tr>
                    <tr><td>Queue</td><td>QStash (Upstash)</td><td>-</td></tr>
                    <tr><td>Storage</td><td>Cloudflare R2</td><td>-</td></tr>
                    <tr><td>Payments</td><td>T-Bank, Telegram Stars, TON</td><td>Multi</td></tr>
                    <tr><td>Monitoring</td><td>Sentry + Vercel Analytics</td><td>-</td></tr>
                    <tr><td>Hosting</td><td>Vercel</td><td>Edge</td></tr>
                </tbody>
            </table>
        </section>

        <!-- USER FLOW SECTION -->
        <section id="user-flow">
            <h2>User Flow</h2>

            <div class="mermaid">
graph LR
    A[Onboarding<br/>3 —à–∞–≥–∞] --> B[Upload<br/>5-8 —Ñ–æ—Ç–æ]
    B --> C[Tier Select<br/>7/15/23]
    C --> D{–û–ø–ª–∞—Ç–∞}
    D -->|T-Bank| E[Redirect]
    D -->|Stars| F[Telegram Pay]
    D -->|TON| G[TonConnect]
    E --> H[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è<br/>Async]
    F --> H
    G --> H
    H --> I[Results<br/>Gallery]
    I --> J[Download<br/>+ Telegram]
            </div>

            <h3>–≠—Ç–∞–ø—ã</h3>
            <div class="feature-box">
                <h4>1. Onboarding</h4>
                <p>3 —à–∞–≥–∞ —Å carousel –ø—Ä–∏–º–µ—Ä–∞–º–∏. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. Auth modal –¥–ª—è –≤–µ–±-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Google OAuth + Email/Password).</p>
            </div>
            <div class="feature-box">
                <h4>2. Upload Photos</h4>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ 5-8 —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö —Ñ–æ—Ç–æ. Drag-n-drop, preview —Å —É–¥–∞–ª–µ–Ω–∏–µ–º. –í–∞–ª–∏–¥–∞—Ü–∏—è: JPEG/PNG/WebP/HEIC, max 30MB. Progress bar.</p>
            </div>
            <div class="feature-box">
                <h4>3. Tier Select</h4>
                <p>–í—ã–±–æ—Ä –ø–∞–∫–µ—Ç–∞: Starter (7 —Ñ–æ—Ç–æ), Standard (15, —Ö–∏—Ç), Premium (23). WCAG 2.1 keyboard navigation. –°–∫–∏–¥–∫–∏ —Å –±–µ–π–¥–∂–∞–º–∏.</p>
            </div>
            <div class="feature-box">
                <h4>4. Payment</h4>
                <p>3 –º–µ—Ç–æ–¥–∞: T-Bank (redirect), Telegram Stars (in-app), TON (TonConnect). Email –¥–ª—è —á–µ–∫–∞. Polling —Å—Ç–∞—Ç—É—Å–∞.</p>
            </div>
            <div class="feature-box">
                <h4>5. Generation</h4>
                <p>Async —á–µ—Ä–µ–∑ QStash + Kie.ai. Progress indicator. –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å ‚Äî —É–≤–µ–¥–æ–º–∏–º –≤ Telegram.</p>
            </div>
            <div class="feature-box">
                <h4>6. Results</h4>
                <p>–ì–∞–ª–µ—Ä–µ—è —Å download. Skeleton placeholders –¥–ª—è pending. "Generate More" –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∏–ª—è.</p>
            </div>
        </section>

        <!-- UI MOCKUPS -->
        <section id="ui-onboarding">
            <h2>UI: Onboarding</h2>
            <p>–≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è —Å 4 —Å—Ç–∞–¥–∏—è–º–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ Auth Modal –¥–ª—è –≤–µ–±-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>

            <div class="mockup-container">
                <div class="mockup-label">–≠–∫—Ä–∞–Ω—ã Onboarding</div>
                <div class="mockup-row">
                    <!-- Stage 1: Initial -->
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <div class="phone-notch"></div>
                            <div class="phone-content" style="text-align: center; padding-top: 40px;">
                                <div style="font-size: 3rem; margin-bottom: 20px;">üé®</div>
                                <h1 style="font-size: 1.5rem; color: var(--gray-900); margin-bottom: 10px;">PinGlass</h1>
                                <p style="color: var(--gray-500); font-size: 0.85rem;">AI Photo Portraits</p>
                                <div style="margin: 30px auto; width: 180px; height: 180px; background: linear-gradient(135deg, var(--pink-100), var(--purple-100)); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                    <div style="width: 80px; height: 80px; background: var(--coral-500); border-radius: 16px; opacity: 0.8;"></div>
                                </div>
                                <p style="color: var(--gray-600); font-size: 0.8rem; padding: 0 20px;">–ó–∞–≥—Ä—É–∑–∏—Ç–µ 5-8 —Ñ–æ—Ç–æ –∏ –ø–æ–ª—É—á–∏—Ç–µ 23 AI-–ø–æ—Ä—Ç—Ä–µ—Ç–∞</p>
                            </div>
                            <div class="phone-cta">
                                <button class="phone-btn phone-btn-primary">–ù–∞—á–∞—Ç—å ‚ú®</button>
                            </div>
                        </div>
                    </div>

                    <!-- Auth Modal -->
                    <div class="phone-frame">
                        <div class="phone-screen" style="background: rgba(0,0,0,0.5);">
                            <div class="phone-notch"></div>
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: white; border-radius: 20px 20px 0 0; padding: 25px;">
                                <h3 style="font-size: 1.1rem; margin-bottom: 15px; text-align: center;">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</h3>
                                <button style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 10px; background: white; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px; font-size: 0.9rem;">
                                    <span style="color: #4285f4;">G</span> Google
                                </button>
                                <div style="text-align: center; color: var(--gray-400); font-size: 0.8rem; margin: 15px 0;">–∏–ª–∏</div>
                                <input type="email" placeholder="Email" style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 10px; margin-bottom: 10px; font-size: 0.9rem;">
                                <input type="password" placeholder="–ü–∞—Ä–æ–ª—å" style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 10px; margin-bottom: 15px; font-size: 0.9rem;">
                                <button class="phone-btn phone-btn-primary">–í–æ–π—Ç–∏</button>
                                <p style="text-align: center; margin-top: 12px; font-size: 0.8rem; color: var(--gray-500);">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <span style="color: var(--coral-500);">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h3>
            <table>
                <tr><th>–≠–ª–µ–º–µ–Ω—Ç</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–§–∞–π–ª</th></tr>
                <tr><td>Stage Animation</td><td>4 —Å—Ç–∞–¥–∏–∏: initial ‚Üí photos ‚Üí glow ‚Üí complete</td><td>onboarding-view.tsx:45-90</td></tr>
                <tr><td>Auth Modal</td><td>Google OAuth + Email/Password</td><td>onboarding-view.tsx:150-280</td></tr>
                <tr><td>Demo Photos</td><td>3 –¥–µ–º–æ-—Ñ–æ—Ç–æ —Å orbit –∞–Ω–∏–º–∞—Ü–∏–µ–π</td><td>onboarding-view.tsx:20-35</td></tr>
                <tr><td>CTA Button</td><td>btn-premium gradient</td><td>onboarding-view.tsx:320</td></tr>
            </table>
        </section>

        <section id="ui-upload">
            <h2>UI: Upload</h2>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ 5-8 —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö —Ñ–æ—Ç–æ —Å drag-n-drop –∏ –ø—Ä–µ–≤—å—é.</p>

            <div class="mockup-container">
                <div class="mockup-label">–≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ</div>
                <div class="mockup-row">
                    <!-- Empty state -->
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <div class="phone-notch"></div>
                            <div class="phone-header">
                                <div class="back-btn">‚Üê</div>
                                <h1>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ</h1>
                            </div>
                            <div class="phone-content">
                                <div style="border: 2px dashed var(--gray-300); border-radius: 16px; padding: 40px 20px; text-align: center; margin-bottom: 15px;">
                                    <div style="font-size: 2.5rem; margin-bottom: 10px;">üì∏</div>
                                    <p style="color: var(--gray-600); font-size: 0.85rem; margin-bottom: 5px;">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ —Å—é–¥–∞</p>
                                    <p style="color: var(--gray-400); font-size: 0.75rem;">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                                </div>
                                <div style="background: var(--blue-100); border-radius: 10px; padding: 12px; margin-bottom: 15px;">
                                    <p style="color: #2563eb; font-size: 0.8rem; margin: 0;">üí° –ó–∞–≥—Ä—É–∑–∏—Ç–µ <strong>5-8 —Ñ–æ—Ç–æ</strong> –ª–∏—Ü–∞ —Å —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∫—É—Ä—Å–æ–≤</p>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--gray-500);">
                                    <span>JPEG, PNG, WebP, HEIC</span>
                                    <span>Max 30MB</span>
                                </div>
                            </div>
                            <div class="phone-cta">
                                <button class="phone-btn phone-btn-disabled">–ó–∞–≥—Ä—É–∂–µ–Ω–æ 0/5 —Ñ–æ—Ç–æ</button>
                            </div>
                        </div>
                    </div>

                    <!-- With photos -->
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <div class="phone-notch"></div>
                            <div class="phone-header">
                                <div class="back-btn">‚Üê</div>
                                <h1>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ</h1>
                            </div>
                            <div class="phone-content">
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 15px;">
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, var(--pink-100), var(--coral-500)); border-radius: 12px; position: relative;">
                                        <span style="position: absolute; top: 4px; right: 4px; background: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem;">‚úï</span>
                                    </div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, var(--purple-100), var(--pink-500)); border-radius: 12px; position: relative;">
                                        <span style="position: absolute; top: 4px; right: 4px; background: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem;">‚úï</span>
                                    </div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, var(--blue-100), var(--purple-500)); border-radius: 12px; position: relative;">
                                        <span style="position: absolute; top: 4px; right: 4px; background: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem;">‚úï</span>
                                    </div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, var(--green-100), var(--blue-500)); border-radius: 12px; position: relative;">
                                        <span style="position: absolute; top: 4px; right: 4px; background: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem;">‚úï</span>
                                    </div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, var(--amber-100), var(--coral-500)); border-radius: 12px; position: relative;">
                                        <span style="position: absolute; top: 4px; right: 4px; background: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem;">‚úï</span>
                                    </div>
                                    <div style="aspect-ratio: 1; border: 2px dashed var(--gray-300); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--gray-400);">+</div>
                                </div>
                                <div style="background: var(--green-100); border-radius: 10px; padding: 12px;">
                                    <p style="color: #059669; font-size: 0.8rem; margin: 0;">‚úì –û—Ç–ª–∏—á–Ω–æ! 5 —Ñ–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</p>
                                </div>
                            </div>
                            <div class="phone-cta">
                                <button class="phone-btn phone-btn-primary">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Kie.ai API</h3>
            <table>
                <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–ü—Ä–∏—á–∏–Ω–∞</th></tr>
                <tr><td>MIN_PHOTOS</td><td>5</td><td>–ú–∏–Ω–∏–º—É–º –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</td></tr>
                <tr><td>MAX_PHOTOS</td><td>8</td><td>–õ–∏–º–∏—Ç Kie.ai API</td></tr>
                <tr><td>MAX_FILE_SIZE</td><td>30 MB</td><td>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏</td></tr>
                <tr><td>VALID_TYPES</td><td>JPEG, PNG, WebP, HEIC</td><td>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã</td></tr>
            </table>
        </section>

        <section id="ui-tier-select">
            <h2>UI: –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞</h2>
            <p>–í—ã–±–æ—Ä –ø–∞–∫–µ—Ç–∞ —Å WCAG 2.1 keyboard navigation –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ü–µ–Ω–∞–º–∏ –∏–∑ –ë–î.</p>

            <div class="mockup-container">
                <div class="mockup-label">–≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞</div>
                <div class="mockup-row">
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <div class="phone-notch"></div>
                            <div class="phone-header">
                                <div class="back-btn">‚Üê</div>
                                <h1>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç</h1>
                            </div>
                            <div class="phone-content">
                                <!-- Starter -->
                                <div style="border: 2px solid var(--gray-200); border-radius: 16px; padding: 15px; margin-bottom: 10px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="font-weight: 600;">Starter</span>
                                        <span style="font-size: 0.75rem; color: var(--gray-500);">7 —Ñ–æ—Ç–æ</span>
                                    </div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--gray-900);">499 ‚ÇΩ</div>
                                </div>

                                <!-- Standard (selected) -->
                                <div style="border: 2px solid var(--coral-500); border-radius: 16px; padding: 15px; margin-bottom: 10px; background: linear-gradient(135deg, rgba(236,72,153,0.05), rgba(255,107,107,0.05)); position: relative;">
                                    <span style="position: absolute; top: -8px; right: 15px; background: var(--coral-500); color: white; padding: 2px 10px; border-radius: 10px; font-size: 0.7rem; font-weight: 600;">–•–ò–¢</span>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="font-weight: 600; color: var(--coral-600);">Standard</span>
                                        <span style="font-size: 0.75rem; color: var(--coral-500);">15 —Ñ–æ—Ç–æ</span>
                                    </div>
                                    <div style="display: flex; align-items: baseline; gap: 8px;">
                                        <span style="font-size: 1.25rem; font-weight: 700; color: var(--coral-600);">799 ‚ÇΩ</span>
                                        <span style="font-size: 0.8rem; color: var(--gray-400); text-decoration: line-through;">999 ‚ÇΩ</span>
                                        <span class="badge badge-green">-20%</span>
                                    </div>
                                </div>

                                <!-- Premium -->
                                <div style="border: 2px solid var(--gray-200); border-radius: 16px; padding: 15px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                        <span style="font-weight: 600;">Premium</span>
                                        <span style="font-size: 0.75rem; color: var(--gray-500);">23 —Ñ–æ—Ç–æ</span>
                                    </div>
                                    <div style="display: flex; align-items: baseline; gap: 8px;">
                                        <span style="font-size: 1.25rem; font-weight: 700; color: var(--gray-900);">1199 ‚ÇΩ</span>
                                        <span style="font-size: 0.8rem; color: var(--gray-400); text-decoration: line-through;">1499 ‚ÇΩ</span>
                                    </div>
                                </div>
                            </div>
                            <div class="phone-cta">
                                <button class="phone-btn phone-btn-primary">–û–ø–ª–∞—Ç–∏—Ç—å 799 ‚ÇΩ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Accessibility (WCAG 2.1)</h3>
            <ul>
                <li><strong>Keyboard Navigation:</strong> Tab/Shift+Tab, Arrow keys, Enter/Space –¥–ª—è –≤—ã–±–æ—Ä–∞</li>
                <li><strong>Focus visible:</strong> –ß—ë—Ç–∫–∏–π outline –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ</li>
                <li><strong>Screen Reader:</strong> aria-label, role="radiogroup"</li>
                <li><strong>Contrast:</strong> –ú–∏–Ω–∏–º—É–º 4.5:1 –¥–ª—è —Ç–µ–∫—Å—Ç–∞</li>
            </ul>
        </section>

        <section id="ui-results">
            <h2>UI: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
            <p>–ì–∞–ª–µ—Ä–µ—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ —Å lazy loading –∏ skeleton placeholders.</p>

            <div class="mockup-container">
                <div class="mockup-label">–≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>
                <div class="mockup-row">
                    <!-- Generating state -->
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <div class="phone-notch"></div>
                            <div class="phone-header">
                                <div class="back-btn">‚Üê</div>
                                <h1>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</h1>
                            </div>
                            <div class="phone-content" style="text-align: center; padding-top: 30px;">
                                <div style="width: 120px; height: 120px; margin: 0 auto 20px; border-radius: 50%; background: conic-gradient(var(--coral-500) 65%, var(--gray-200) 0); display: flex; align-items: center; justify-content: center;">
                                    <div style="width: 100px; height: 100px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 700; color: var(--coral-600);">65%</div>
                                </div>
                                <h3 style="font-size: 1rem; margin-bottom: 8px;">–°–æ–∑–¥–∞—ë–º –≤–∞—à–∏ –ø–æ—Ä—Ç—Ä–µ—Ç—ã...</h3>
                                <p style="color: var(--gray-500); font-size: 0.8rem;">10 –∏–∑ 15 —Ñ–æ—Ç–æ –≥–æ—Ç–æ–≤–æ</p>
                                <div style="margin-top: 25px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, var(--pink-100), var(--coral-500)); border-radius: 10px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, var(--purple-100), var(--pink-500)); border-radius: 10px;"></div>
                                    <div style="aspect-ratio: 1; background: var(--gray-200); border-radius: 10px; animation: pulse 1.5s infinite;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Results ready -->
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <div class="phone-notch"></div>
                            <div class="phone-header">
                                <div class="back-btn">‚Üê</div>
                                <h1>–í–∞—à–∏ –ø–æ—Ä—Ç—Ä–µ—Ç—ã</h1>
                                <span style="margin-left: auto; background: var(--green-100); color: #059669; padding: 4px 10px; border-radius: 8px; font-size: 0.7rem;">15 —Ñ–æ—Ç–æ</span>
                            </div>
                            <div class="phone-content">
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #ff9a9e, #fecfef); border-radius: 10px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #a18cd1, #fbc2eb); border-radius: 10px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #ffecd2, #fcb69f); border-radius: 10px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #f093fb, #f5576c); border-radius: 10px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #4facfe, #00f2fe); border-radius: 10px;"></div>
                                </div>
                                <div style="margin-top: 15px; display: flex; gap: 8px;">
                                    <button style="flex: 1; padding: 10px; border: 1px solid var(--gray-300); border-radius: 10px; background: white; font-size: 0.85rem;">üì• –°–∫–∞—á–∞—Ç—å –≤—Å–µ</button>
                                    <button style="flex: 1; padding: 10px; border: 1px solid var(--gray-300); border-radius: 10px; background: white; font-size: 0.85rem;">üì§ Telegram</button>
                                </div>
                            </div>
                            <div class="phone-cta">
                                <button class="phone-btn phone-btn-primary">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—â—ë ‚ú®</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h3>
            <table>
                <tr><th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                <tr><td>ResultsGallery</td><td>Lazy-loaded gallery —Å React.lazy()</td></tr>
                <tr><td>ProgressCard</td><td>–ö—Ä—É–≥–æ–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</td></tr>
                <tr><td>SkeletonPhoto</td><td>Placeholder –¥–ª—è loading —Ñ–æ—Ç–æ</td></tr>
                <tr><td>DownloadButton</td><td>–°–∫–∞—á–∏–≤–∞–Ω–∏–µ ZIP –∞—Ä—Ö–∏–≤–∞</td></tr>
            </table>
        </section>

        <section id="ui-avatar-detail">
            <h2>UI: –î–µ—Ç–∞–ª–∏ –∞–≤–∞—Ç–∞—Ä–∞</h2>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–æ–π: —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.</p>

            <div class="mockup-container">
                <div class="mockup-label">–≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –∞–≤–∞—Ç–∞—Ä–∞</div>
                <div class="mockup-row">
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <div class="phone-notch"></div>
                            <div class="phone-header">
                                <div class="back-btn">‚Üê</div>
                                <h1>–ú–æ–π –∞–≤–∞—Ç–∞—Ä</h1>
                                <span style="margin-left: auto; color: var(--gray-400);">‚öôÔ∏è</span>
                            </div>
                            <div class="phone-content">
                                <div style="text-align: center; margin-bottom: 20px;">
                                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--coral-500), var(--pink-500)); border-radius: 50%; margin: 0 auto 10px;"></div>
                                    <h3 style="font-size: 1.1rem; margin-bottom: 4px;">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</h3>
                                    <p style="color: var(--gray-500); font-size: 0.8rem;">15 —Ñ–æ—Ç–æ ‚Ä¢ –°–æ–∑–¥–∞–Ω 15 —è–Ω–≤</p>
                                </div>

                                <h4 style="font-size: 0.85rem; color: var(--gray-700); margin-bottom: 10px;">–†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ —Ñ–æ—Ç–æ (6)</h4>
                                <div style="display: flex; gap: 8px; overflow-x: auto; margin-bottom: 20px;">
                                    <div style="width: 60px; height: 60px; flex-shrink: 0; background: var(--gray-200); border-radius: 10px;"></div>
                                    <div style="width: 60px; height: 60px; flex-shrink: 0; background: var(--gray-200); border-radius: 10px;"></div>
                                    <div style="width: 60px; height: 60px; flex-shrink: 0; background: var(--gray-200); border-radius: 10px;"></div>
                                    <div style="width: 60px; height: 60px; flex-shrink: 0; border: 2px dashed var(--gray-300); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--gray-400);">+</div>
                                </div>

                                <h4 style="font-size: 0.85rem; color: var(--gray-700); margin-bottom: 10px;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h4>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px;">
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #ff9a9e, #fecfef); border-radius: 8px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #a18cd1, #fbc2eb); border-radius: 8px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #ffecd2, #fcb69f); border-radius: 8px;"></div>
                                    <div style="aspect-ratio: 1; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px;"></div>
                                </div>
                            </div>
                            <div class="phone-cta">
                                <button class="phone-btn phone-btn-primary">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—â—ë</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="ui-payment">
            <h2>UI: –û–ø–ª–∞—Ç–∞</h2>
            <p>–¢—Ä–∏ –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã: T-Bank, Telegram Stars, TON.</p>

            <div class="mockup-container">
                <div class="mockup-label">–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã</div>
                <div class="mockup-row">
                    <!-- Payment method selection -->
                    <div class="phone-frame">
                        <div class="phone-screen" style="background: rgba(0,0,0,0.5);">
                            <div class="phone-notch"></div>
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: white; border-radius: 20px 20px 0 0; padding: 20px;">
                                <h3 style="font-size: 1.1rem; margin-bottom: 5px; text-align: center;">–û–ø–ª–∞—Ç–∞</h3>
                                <p style="text-align: center; color: var(--gray-500); font-size: 0.85rem; margin-bottom: 15px;">Standard ‚Ä¢ 15 —Ñ–æ—Ç–æ ‚Ä¢ <strong>799 ‚ÇΩ</strong></p>

                                <div style="margin-bottom: 15px;">
                                    <!-- T-Bank -->
                                    <div style="border: 2px solid var(--coral-500); border-radius: 12px; padding: 12px; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; background: rgba(255,107,107,0.05);">
                                        <div style="width: 40px; height: 40px; background: #ffdd2d; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold;">T</div>
                                        <div>
                                            <div style="font-weight: 600; font-size: 0.9rem;">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</div>
                                            <div style="color: var(--gray-500); font-size: 0.75rem;">Visa, Mastercard, –ú–ò–†</div>
                                        </div>
                                        <span style="margin-left: auto; color: var(--coral-500);">‚úì</span>
                                    </div>
                                    <!-- Stars -->
                                    <div style="border: 1px solid var(--gray-200); border-radius: 12px; padding: 12px; margin-bottom: 8px; display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 40px; height: 40px; background: #fbbf24; border-radius: 8px; display: flex; align-items: center; justify-content: center;">‚≠ê</div>
                                        <div>
                                            <div style="font-weight: 600; font-size: 0.9rem;">Telegram Stars</div>
                                            <div style="color: var(--gray-500); font-size: 0.75rem;">1598 Stars</div>
                                        </div>
                                    </div>
                                    <!-- TON -->
                                    <div style="border: 1px solid var(--gray-200); border-radius: 12px; padding: 12px; display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 40px; height: 40px; background: #0088cc; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">üíé</div>
                                        <div>
                                            <div style="font-weight: 600; font-size: 0.9rem;">TON Crypto</div>
                                            <div style="color: var(--gray-500); font-size: 0.75rem;">‚âà 2.5 TON</div>
                                        </div>
                                    </div>
                                </div>

                                <input type="email" placeholder="Email –¥–ª—è —á–µ–∫–∞" style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 10px; margin-bottom: 15px; font-size: 0.9rem;">
                                <button class="phone-btn phone-btn-primary">–û–ø–ª–∞—Ç–∏—Ç—å 799 ‚ÇΩ</button>
                            </div>
                        </div>
                    </div>

                    <!-- TON Connect -->
                    <div class="phone-frame">
                        <div class="phone-screen" style="background: rgba(0,0,0,0.5);">
                            <div class="phone-notch"></div>
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: white; border-radius: 20px 20px 0 0; padding: 20px;">
                                <h3 style="font-size: 1.1rem; margin-bottom: 15px; text-align: center;">üíé TON –û–ø–ª–∞—Ç–∞</h3>
                                <div style="background: var(--blue-100); border-radius: 12px; padding: 20px; text-align: center; margin-bottom: 15px;">
                                    <div style="font-size: 2rem; font-weight: 700; color: #0088cc; margin-bottom: 5px;">2.5 TON</div>
                                    <div style="color: var(--gray-600); font-size: 0.85rem;">‚âà 799 ‚ÇΩ</div>
                                </div>
                                <div style="background: var(--gray-100); border-radius: 10px; padding: 12px; margin-bottom: 15px;">
                                    <div style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: 5px;">–ö–æ—à–µ–ª—ë–∫</div>
                                    <div style="font-size: 0.85rem; font-family: monospace;">UQ...x8Kf</div>
                                </div>
                                <button style="width: 100%; padding: 12px; border-radius: 10px; border: none; background: #0088cc; color: white; font-weight: 600; font-size: 0.9rem;">–ü–æ–¥–∫–ª—é—á–∏—Ç—å Tonkeeper</button>
                                <p style="text-align: center; margin-top: 10px; font-size: 0.75rem; color: var(--gray-500);">–ò–ª–∏ Tonhub, MyTonWallet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Steps</h3>
            <table>
                <tr><th>Step</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                <tr><td>FORM</td><td>–í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã, –≤–≤–æ–¥ email</td></tr>
                <tr><td>PROCESSING</td><td>–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –≤ API</td></tr>
                <tr><td>REDIRECT</td><td>–†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ T-Bank (–¥–ª—è –∫–∞—Ä—Ç)</td></tr>
                <tr><td>STARS_WAITING</td><td>–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è Stars</td></tr>
                <tr><td>TON_PAYMENT</td><td>TonConnect –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</td></tr>
                <tr><td>SUCCESS</td><td>–ü–ª–∞—Ç—ë–∂ —É—Å–ø–µ—à–µ–Ω</td></tr>
                <tr><td>ERROR</td><td>–û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞</td></tr>
            </table>
        </section>

        <section id="ui-referral">
            <h2>UI: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å</h2>
            <p>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å 10% –∫–æ–º–∏—Å—Å–∏–µ–π (50% –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤).</p>

            <div class="mockup-container">
                <div class="mockup-label">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å</div>
                <div class="mockup-row">
                    <div class="phone-frame">
                        <div class="phone-screen">
                            <div class="phone-notch"></div>
                            <div class="phone-header">
                                <div class="back-btn">‚Üê</div>
                                <h1>–†–µ—Ñ–µ—Ä–∞–ª—ã</h1>
                            </div>
                            <div class="phone-content">
                                <div style="background: linear-gradient(135deg, var(--coral-500), var(--pink-500)); border-radius: 16px; padding: 20px; color: white; margin-bottom: 15px;">
                                    <div style="font-size: 0.8rem; opacity: 0.9; margin-bottom: 5px;">–í–∞—à –±–∞–ª–∞–Ω—Å</div>
                                    <div style="font-size: 2rem; font-weight: 700;">2,450 ‚ÇΩ</div>
                                    <div style="font-size: 0.75rem; opacity: 0.8; margin-top: 5px;">–ö–æ–º–∏—Å—Å–∏—è: 10%</div>
                                </div>

                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 15px;">
                                    <div style="background: var(--gray-50); border-radius: 12px; padding: 15px; text-align: center;">
                                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--coral-600);">24</div>
                                        <div style="font-size: 0.75rem; color: var(--gray-500);">–†–µ—Ñ–µ—Ä–∞–ª–æ–≤</div>
                                    </div>
                                    <div style="background: var(--gray-50); border-radius: 12px; padding: 15px; text-align: center;">
                                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--green-500);">8</div>
                                        <div style="font-size: 0.75rem; color: var(--gray-500);">–ü–æ–∫—É–ø–æ–∫</div>
                                    </div>
                                </div>

                                <h4 style="font-size: 0.85rem; color: var(--gray-700); margin-bottom: 10px;">–í–∞—à–∞ —Å—Å—ã–ª–∫–∞</h4>
                                <div style="background: var(--gray-100); border-radius: 10px; padding: 12px; display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                    <span style="font-size: 0.8rem; color: var(--gray-600); flex: 1; overflow: hidden; text-overflow: ellipsis;">t.me/pinglass_bot?start=ref_abc123</span>
                                    <button style="background: var(--coral-500); color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 0.75rem;">üìã</button>
                                </div>

                                <button style="width: 100%; padding: 10px; border: 1px solid var(--gray-300); border-radius: 10px; background: white; font-size: 0.85rem; margin-bottom: 10px;">üéØ –°—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º (50%)</button>
                            </div>
                            <div class="phone-cta">
                                <button class="phone-btn phone-btn-primary">–í—ã–≤–µ—Å—Ç–∏ 2,450 ‚ÇΩ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3>–ö–æ–º–∏—Å—Å–∏–∏</h3>
            <table>
                <tr><th>–¢–∏–ø</th><th>–ö–æ–º–∏—Å—Å–∏—è</th><th>–£—Å–ª–æ–≤–∏–µ</th></tr>
                <tr><td>–û–±—ã—á–Ω—ã–π —Ä–µ—Ñ–µ—Ä–µ—Ä</td><td>10%</td><td>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</td></tr>
                <tr><td>–ü–∞—Ä—Ç–Ω—ë—Ä</td><td>50%</td><td>–û–¥–æ–±—Ä–µ–Ω–Ω–∞—è –∑–∞—è–≤–∫–∞</td></tr>
                <tr><td>Min –≤—ã–≤–æ–¥</td><td>500 ‚ÇΩ</td><td>–ù–∞ –±–∞–Ω–∫–æ–≤—Å–∫—É—é –∫–∞—Ä—Ç—É</td></tr>
            </table>
        </section>

        <!-- BACKEND SECTIONS -->
        <section id="async-generation">
            <h2>Async –≥–µ–Ω–µ—Ä–∞—Ü–∏—è</h2>

            <h3>Fire-and-Forget Pattern</h3>
            <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ QStash, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å Cloudflare 100s timeout.</p>

            <pre><code>// 1. –°–æ–∑–¥–∞—ë–º –∑–∞–¥–∞—á—É –≤ kie_tasks
INSERT INTO kie_tasks (job_id, kie_task_id, prompt_index, status)

// 2. QStash –≤—ã–∑—ã–≤–∞–µ—Ç Kie.ai API
POST /api/qstash/generate ‚Üí Kie.ai

// 3. Cron –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å
GET /api/cron/poll-kie-tasks

// 4. –ü–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ R2 –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –ë–î
UPDATE generated_photos SET image_url = ?, status = 'completed'</code></pre>

            <h3>–¢–∞–±–ª–∏—Ü–∞ kie_tasks</h3>
            <table>
                <tr><th>–ü–æ–ª–µ</th><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                <tr><td>id</td><td>SERIAL</td><td>Primary key</td></tr>
                <tr><td>job_id</td><td>INTEGER</td><td>FK ‚Üí generation_jobs</td></tr>
                <tr><td>kie_task_id</td><td>VARCHAR</td><td>ID –æ—Ç Kie.ai API</td></tr>
                <tr><td>prompt_index</td><td>INTEGER</td><td>–ò–Ω–¥–µ–∫—Å –ø—Ä–æ–º–ø—Ç–∞ (0-22)</td></tr>
                <tr><td>status</td><td>VARCHAR</td><td>pending / completed / failed</td></tr>
                <tr><td>result_url</td><td>TEXT</td><td>URL –≥–æ—Ç–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</td></tr>
                <tr><td>attempts</td><td>INTEGER</td><td>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (max 3)</td></tr>
            </table>
        </section>

        <section id="qstash">
            <h2>QStash –æ—á–µ—Ä–µ–¥–∏</h2>

            <h3>Endpoints</h3>
            <table>
                <tr><th>Endpoint</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>Retry</th></tr>
                <tr><td><code>/api/qstash/generate</code></td><td>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Ñ–æ—Ç–æ</td><td>3 –ø–æ–ø—ã—Ç–∫–∏</td></tr>
                <tr><td><code>/api/qstash/notify</code></td><td>Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</td><td>5 –ø–æ–ø—ã—Ç–æ–∫</td></tr>
                <tr><td><code>/api/qstash/webhook</code></td><td>–û–±—Ä–∞–±–æ—Ç–∫–∞ webhook</td><td>3 –ø–æ–ø—ã—Ç–∫–∏</td></tr>
            </table>

            <h3>Dead Letter Queue</h3>
            <p>–ù–µ—É—Å–ø–µ—à–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö retry –ø–æ–ø–∞–¥–∞—é—Ç –≤ DLQ. –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ <code>/admin/generations</code>.</p>

            <h3>Idempotency</h3>
            <pre><code>// –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á
const idempotencyKey = `gen_${jobId}_${promptIndex}`

// QStash –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä—É–µ—Ç –ø–æ –∫–ª—é—á—É
await qstash.publishJSON({
  url: '/api/qstash/generate',
  body: { jobId, promptIndex },
  deduplicationId: idempotencyKey
})</code></pre>
        </section>

        <section id="payments">
            <h2>–ü–ª–∞—Ç–µ–∂–∏</h2>

            <h3>–¢—Ä–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞</h3>
            <div class="card-grid">
                <div class="card">
                    <h4><span class="badge badge-yellow">T-Bank</span></h4>
                    <p>–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã. Redirect –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã. Webhook –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. SHA256 –ø–æ–¥–ø–∏—Å—å.</p>
                </div>
                <div class="card">
                    <h4><span class="badge badge-blue">Telegram Stars</span></h4>
                    <p>–í–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞ Telegram. In-app –æ–ø–ª–∞—Ç–∞. Polling —Å—Ç–∞—Ç—É—Å–∞ —á–µ—Ä–µ–∑ Bot API.</p>
                </div>
                <div class="card">
                    <h4><span class="badge badge-purple">TON Crypto</span></h4>
                    <p>–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ TON. TonConnect –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.</p>
                </div>
            </div>

            <h3>–ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π</h3>
            <pre><code>// –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ constraints –≤ –ë–î
telegram_charge_id VARCHAR(255) UNIQUE  -- Stars
ton_tx_hash CHAR(64) UNIQUE             -- TON

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–∞—Ç–µ–∂–∞
SELECT COUNT(*) FROM payments
WHERE user_id = ? AND status = 'succeeded'
AND created_at > NOW() - INTERVAL '5 minutes'</code></pre>

            <h3>Refund Dispatcher</h3>
            <pre><code>async function refundPayment(paymentId: string, reason: string) {
  const payment = await getPayment(paymentId)

  switch (payment.provider) {
    case 'tbank':
      return await tbankRefund(payment.payment_id, payment.amount)
    case 'stars':
      return await starsRefund(payment.telegram_charge_id)
    case 'ton':
      // TON refunds are manual
      return await markForManualRefund(paymentId, reason)
  }
}</code></pre>
        </section>

        <section id="cron-jobs">
            <h2>Cron Jobs</h2>

            <table>
                <tr><th>Job</th><th>Schedule</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                <tr><td><code>poll-kie-tasks</code></td><td>* * * * *</td><td>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Kie.ai –∑–∞–¥–∞—á</td></tr>
                <tr><td><code>monitor-ton</code></td><td>*/5 * * * *</td><td>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</td></tr>
                <tr><td><code>cleanup-expired</code></td><td>0 * * * *</td><td>–û—á–∏—Å—Ç–∫–∞ expired –ø–ª–∞—Ç–µ–∂–µ–π</td></tr>
                <tr><td><code>stuck-jobs</code></td><td>*/10 * * * *</td><td>–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å—à–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π</td></tr>
                <tr><td><code>telegram-queue</code></td><td>* * * * *</td><td>–û—Ç–ø—Ä–∞–≤–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</td></tr>
            </table>
        </section>

        <!-- SECURITY SECTIONS -->
        <section id="security">
            <h2>–ó–∞—â–∏—Ç–∞</h2>

            <h3>Webhook Signature (T-Bank)</h3>
            <pre><code>const expectedSignature = crypto
  .createHash('sha256')
  .update(password + JSON.stringify(sortedData))
  .digest('hex')

if (signature !== expectedSignature) {
  return new Response('Invalid signature', { status: 403 })
}</code></pre>

            <h3>Telegram Auth Validation</h3>
            <pre><code>// HMAC-SHA256 –ø—Ä–æ–≤–µ—Ä–∫–∞ initData
const secretKey = crypto
  .createHmac('sha256', 'WebAppData')
  .update(BOT_TOKEN)
  .digest()

const hash = crypto
  .createHmac('sha256', secretKey)
  .update(dataCheckString)
  .digest('hex')</code></pre>

            <h3>Login Protection</h3>
            <ul>
                <li>Brute-force –∑–∞—â–∏—Ç–∞: 5 –ø–æ–ø—ã—Ç–æ–∫ / 15 –º–∏–Ω—É—Ç</li>
                <li>Session tokens —Å JWT</li>
                <li>Admin –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å whitelist IP (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</li>
            </ul>
        </section>

        <section id="idempotency">
            <h2>–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</h2>

            <table>
                <tr><th>–û–ø–µ—Ä–∞—Ü–∏—è</th><th>–ö–ª—é—á</th><th>–ú–µ—Ö–∞–Ω–∏–∑–º</th></tr>
                <tr><td>–ü–ª–∞—Ç—ë–∂ Stars</td><td>telegram_charge_id</td><td>UNIQUE constraint</td></tr>
                <tr><td>–ü–ª–∞—Ç—ë–∂ TON</td><td>ton_tx_hash</td><td>UNIQUE constraint</td></tr>
                <tr><td>QStash –∑–∞–¥–∞—á–∞</td><td>deduplicationId</td><td>QStash dedup</td></tr>
                <tr><td>–°–æ–∑–¥–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞</td><td>user_id + name</td><td>UNIQUE (user_id, name)</td></tr>
                <tr><td>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ</td><td>payment_id</td><td>Check before insert</td></tr>
            </table>
        </section>

        <section id="rate-limiting">
            <h2>Rate Limiting</h2>

            <table>
                <tr><th>Endpoint</th><th>–õ–∏–º–∏—Ç</th><th>–û–∫–Ω–æ</th></tr>
                <tr><td><code>/api/generate</code></td><td>5 –∑–∞–ø—Ä–æ—Å–æ–≤</td><td>1 –º–∏–Ω—É—Ç–∞</td></tr>
                <tr><td><code>/api/payment/create</code></td><td>10 –∑–∞–ø—Ä–æ—Å–æ–≤</td><td>1 –º–∏–Ω—É—Ç–∞</td></tr>
                <tr><td><code>/api/user</code></td><td>30 –∑–∞–ø—Ä–æ—Å–æ–≤</td><td>1 –º–∏–Ω—É—Ç–∞</td></tr>
                <tr><td><code>/api/admin/*</code></td><td>100 –∑–∞–ø—Ä–æ—Å–æ–≤</td><td>1 –º–∏–Ω—É—Ç–∞</td></tr>
                <tr><td><code>/api/referral/withdraw</code></td><td>3 –∑–∞–ø—Ä–æ—Å–∞</td><td>1 —á–∞—Å</td></tr>
            </table>
        </section>

        <!-- ADMIN PANEL SECTIONS - PLACEHOLDER -->
        <section id="admin-overview">
            <h2>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Äî 11 —Å–µ–∫—Ü–∏–π</h2>

            <p>–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.</p>

            <div class="tabs-row">
                <span class="tab-badge active">Dashboard</span>
                <span class="tab-badge">Users</span>
                <span class="tab-badge">Payments</span>
                <span class="tab-badge">Generations</span>
                <span class="tab-badge">Prompts</span>
                <span class="tab-badge">Referrals</span>
                <span class="tab-badge">Partners</span>
                <span class="tab-badge">Telegram</span>
                <span class="tab-badge">Support</span>
                <span class="tab-badge">Logs</span>
                <span class="tab-badge">Settings</span>
            </div>

            <h3>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h3>
            <table>
                <tr><th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th><th>–§–∞–π–ª</th><th>–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</th></tr>
                <tr><td>Dashboard</td><td>Dashboard.tsx</td><td>KPI, –≥—Ä–∞—Ñ–∏–∫–∏, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</td></tr>
                <tr><td>UsersView</td><td>UsersView.tsx</td><td>–¢–∞–±–ª–∏—Ü–∞, –ø–æ–∏—Å–∫, Telegram —Å—Ç–∞—Ç—É—Å, Partner badge</td></tr>
                <tr><td>PaymentsView</td><td>PaymentsView.tsx</td><td>–§–∏–ª—å—Ç—Ä—ã, —Å—Ç–∞—Ç—É—Å—ã, refund, –¥–µ—Ç–∞–ª–∏</td></tr>
                <tr><td>GenerationsView</td><td>GenerationsView.tsx</td><td>–ü—Ä–æ–≥—Ä–µ—Å—Å, retry, auto-refresh</td></tr>
                <tr><td>PromptTesterView</td><td>PromptTesterView.tsx</td><td>–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã, test blocks, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è</td></tr>
                <tr><td>ReferralsView</td><td>ReferralsView.tsx</td><td>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –≤—ã–≤–æ–¥—ã, MTProto affiliate</td></tr>
                <tr><td>PartnersView</td><td>PartnersView.tsx</td><td>–ó–∞—è–≤–∫–∏, approve/reject, –∞–∫—Ç–∏–≤–Ω—ã–µ</td></tr>
                <tr><td>TelegramBroadcastView</td><td>TelegramBroadcastView.tsx</td><td>–†–∞—Å—Å—ã–ª–∫–∞, —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥, –∏—Å—Ç–æ—Ä–∏—è</td></tr>
                <tr><td>TicketsView</td><td>TicketsView.tsx</td><td>Support —Ç–∏–∫–µ—Ç—ã, SLA, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</td></tr>
                <tr><td>LogsView</td><td>LogsView.tsx</td><td>Sentry events, —Ñ–∏–ª—å—Ç—Ä—ã, –¥–µ—Ç–∞–ª–∏</td></tr>
                <tr><td>SettingsView</td><td>SettingsView.tsx</td><td>–¢–∞—Ä–∏—Ñ—ã, T-Bank, –ø–ª–∞—Ç—ë–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã</td></tr>
            </table>
        </section>

        <!-- ADMIN PANEL SECTIONS -->
        <section id="admin-dashboard">
            <h2>Admin: Dashboard</h2>
            <p>–ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å KPI –º–µ—Ç—Ä–∏–∫–∞–º–∏, –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º.</p>

            <div class="admin-mockup">
                <div class="admin-header">
                    <div class="admin-logo">
                        <div class="admin-logo-icon">P</div>
                        <span>PinGlass Admin</span>
                    </div>
                    <span class="test-mode-badge">TEST MODE</span>
                </div>
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item active">üìä Dashboard</a>
                    <a href="#" class="admin-nav-item">üë• Users</a>
                    <a href="#" class="admin-nav-item">üí≥ Payments</a>
                    <a href="#" class="admin-nav-item">‚ö° Generations</a>
                    <a href="#" class="admin-nav-item">‚ú® Prompts</a>
                    <a href="#" class="admin-nav-item">üéÅ Referrals</a>
                    <a href="#" class="admin-nav-item">üëë Partners</a>
                    <a href="#" class="admin-nav-item">üí¨ Telegram</a>
                    <a href="#" class="admin-nav-item">üé´ Support</a>
                    <a href="#" class="admin-nav-item">üìã Logs</a>
                    <a href="#" class="admin-nav-item">‚öôÔ∏è Settings</a>
                </div>
                <div class="admin-content">
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                            <div class="kpi-value">1,247</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">–í—ã—Ä—É—á–∫–∞ (–º–µ—Å)</div>
                            <div class="kpi-value green">‚ÇΩ 156,800</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">–ì–µ–Ω–µ—Ä–∞—Ü–∏–π</div>
                            <div class="kpi-value blue">3,892</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">–ö–æ–Ω–≤–µ—Ä—Å–∏—è</div>
                            <div class="kpi-value">12.4%</div>
                        </div>
                    </div>

                    <h4>–ü–ª–∞—Ç–µ–∂–∏ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º</h4>
                    <div style="display: flex; gap: 15px; margin-top: 10px;">
                        <div style="flex: 1; background: var(--gray-50); border-radius: 10px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span class="provider-badge provider-tbank">T-Bank</span>
                                <span style="font-weight: 600;">68%</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill green" style="width: 68%;"></div></div>
                        </div>
                        <div style="flex: 1; background: var(--gray-50); border-radius: 10px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span class="provider-badge provider-stars">‚≠ê Stars</span>
                                <span style="font-weight: 600;">24%</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill blue" style="width: 24%;"></div></div>
                        </div>
                        <div style="flex: 1; background: var(--gray-50); border-radius: 10px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span class="provider-badge provider-ton">üíé TON</span>
                                <span style="font-weight: 600;">8%</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill blue" style="width: 8%;"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="admin-users">
            <h2>Admin: Users</h2>
            <p>–¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–∏—Å–∫–æ–º, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ Partner badge.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">üìä Dashboard</a>
                    <a href="#" class="admin-nav-item active">üë• Users</a>
                    <a href="#" class="admin-nav-item">üí≥ Payments</a>
                </div>
                <div class="admin-content">
                    <div class="filters-row">
                        <input type="text" class="filter-input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, telegram...">
                        <select class="filter-select">
                            <option>–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                            <option>–° –ø–æ–∫—É–ø–∫–∞–º–∏</option>
                            <option>–ü–∞—Ä—Ç–Ω—ë—Ä—ã</option>
                            <option>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</option>
                        </select>
                        <button class="btn-sm btn-primary">–≠–∫—Å–ø–æ—Ä—Ç CSV</button>
                    </div>

                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Telegram</th>
                                <th>–ü–æ–∫—É–ø–æ–∫</th>
                                <th>–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#1247</td>
                                <td>@alexey_dev <span class="badge badge-purple">Partner</span></td>
                                <td>5</td>
                                <td>‚ÇΩ 4,995</td>
                                <td><span class="status-badge status-succeeded">Active</span></td>
                                <td><button class="btn-sm btn-secondary">View</button></td>
                            </tr>
                            <tr>
                                <td>#1246</td>
                                <td>@maria_photo</td>
                                <td>2</td>
                                <td>‚ÇΩ 1,598</td>
                                <td><span class="status-badge status-succeeded">Active</span></td>
                                <td><button class="btn-sm btn-secondary">View</button></td>
                            </tr>
                            <tr>
                                <td>#1245</td>
                                <td>@ivan_test</td>
                                <td>0</td>
                                <td>‚ÇΩ 0</td>
                                <td><span class="status-badge status-pending">New</span></td>
                                <td><button class="btn-sm btn-secondary">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="admin-payments">
            <h2>Admin: Payments</h2>
            <p>–í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É, —Å—Ç–∞—Ç—É—Å—É –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é refund.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">üë• Users</a>
                    <a href="#" class="admin-nav-item active">üí≥ Payments</a>
                    <a href="#" class="admin-nav-item">‚ö° Generations</a>
                </div>
                <div class="admin-content">
                    <div class="filters-row">
                        <select class="filter-select">
                            <option>–í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã</option>
                            <option>T-Bank</option>
                            <option>Stars</option>
                            <option>TON</option>
                        </select>
                        <select class="filter-select">
                            <option>–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option>Succeeded</option>
                            <option>Pending</option>
                            <option>Failed</option>
                            <option>Refunded</option>
                        </select>
                        <input type="date" class="filter-select">
                    </div>

                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>–ü—Ä–æ–≤–∞–π–¥–µ—Ä</th>
                                <th>–°—É–º–º–∞</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#P-4521</td>
                                <td>@alexey_dev</td>
                                <td><span class="provider-badge provider-tbank">T-Bank</span></td>
                                <td>‚ÇΩ 799</td>
                                <td><span class="status-badge status-succeeded">Succeeded</span></td>
                                <td>17 —è–Ω–≤, 14:32</td>
                                <td><button class="btn-sm btn-danger">Refund</button></td>
                            </tr>
                            <tr>
                                <td>#P-4520</td>
                                <td>@maria_photo</td>
                                <td><span class="provider-badge provider-stars">‚≠ê Stars</span></td>
                                <td>1598 ‚≠ê</td>
                                <td><span class="status-badge status-succeeded">Succeeded</span></td>
                                <td>17 —è–Ω–≤, 13:15</td>
                                <td><button class="btn-sm btn-danger">Refund</button></td>
                            </tr>
                            <tr>
                                <td>#P-4519</td>
                                <td>@crypto_fan</td>
                                <td><span class="provider-badge provider-ton">üíé TON</span></td>
                                <td>2.5 TON</td>
                                <td><span class="status-badge status-pending">Pending</span></td>
                                <td>17 —è–Ω–≤, 12:48</td>
                                <td><button class="btn-sm btn-secondary">Check</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="admin-generations">
            <h2>Admin: Generations</h2>
            <p>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º, retry –∏ auto-refresh.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">üí≥ Payments</a>
                    <a href="#" class="admin-nav-item active">‚ö° Generations</a>
                    <a href="#" class="admin-nav-item">‚ú® Prompts</a>
                </div>
                <div class="admin-content">
                    <div class="filters-row">
                        <select class="filter-select">
                            <option>–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option>Processing</option>
                            <option>Completed</option>
                            <option>Failed</option>
                        </select>
                        <label style="display: flex; align-items: center; gap: 5px; font-size: 0.85rem;">
                            <input type="checkbox" checked> Auto-refresh (30s)
                        </label>
                    </div>

                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Job ID</th>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>–¢–∞—Ä–∏—Ñ</th>
                                <th>–ü—Ä–æ–≥—Ä–µ—Å—Å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#G-892</td>
                                <td>@alexey_dev</td>
                                <td>Premium (23)</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div class="progress-bar" style="width: 100px;"><div class="progress-fill green" style="width: 65%;"></div></div>
                                        <span style="font-size: 0.75rem;">15/23</span>
                                    </div>
                                </td>
                                <td><span class="status-badge status-processing">Processing</span></td>
                                <td><button class="btn-sm btn-secondary">View</button></td>
                            </tr>
                            <tr>
                                <td>#G-891</td>
                                <td>@maria_photo</td>
                                <td>Standard (15)</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div class="progress-bar" style="width: 100px;"><div class="progress-fill green" style="width: 100%;"></div></div>
                                        <span style="font-size: 0.75rem;">15/15</span>
                                    </div>
                                </td>
                                <td><span class="status-badge status-succeeded">Completed</span></td>
                                <td><button class="btn-sm btn-secondary">View</button></td>
                            </tr>
                            <tr>
                                <td>#G-890</td>
                                <td>@test_user</td>
                                <td>Starter (7)</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div class="progress-bar" style="width: 100px;"><div class="progress-fill red" style="width: 43%;"></div></div>
                                        <span style="font-size: 0.75rem;">3/7 ‚ùå</span>
                                    </div>
                                </td>
                                <td><span class="status-badge status-failed">Failed</span></td>
                                <td><button class="btn-sm btn-primary">Retry</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="admin-prompts">
            <h2>Admin: Prompts</h2>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">‚ö° Generations</a>
                    <a href="#" class="admin-nav-item active">‚ú® Prompts</a>
                    <a href="#" class="admin-nav-item">üéÅ Referrals</a>
                </div>
                <div class="admin-content">
                    <h4>–†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ —Ñ–æ—Ç–æ</h4>
                    <div style="display: flex; gap: 10px; margin: 10px 0 20px;">
                        <div style="width: 80px; height: 80px; background: var(--gray-200); border-radius: 10px;"></div>
                        <div style="width: 80px; height: 80px; background: var(--gray-200); border-radius: 10px;"></div>
                        <div style="width: 80px; height: 80px; background: var(--gray-200); border-radius: 10px;"></div>
                        <div style="width: 80px; height: 80px; border: 2px dashed var(--gray-300); border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                            <span style="font-size: 1.5rem; color: var(--gray-400);">+</span>
                        </div>
                    </div>

                    <h4>–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px;">
                        <div style="background: var(--gray-50); border-radius: 10px; padding: 12px;">
                            <div style="font-weight: 600; font-size: 0.85rem; margin-bottom: 5px;">#0 Business Portrait</div>
                            <p style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: 10px;">Professional headshot...</p>
                            <button class="btn-sm btn-primary">Test</button>
                        </div>
                        <div style="background: var(--gray-50); border-radius: 10px; padding: 12px;">
                            <div style="font-weight: 600; font-size: 0.85rem; margin-bottom: 5px;">#1 Creative Studio</div>
                            <p style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: 10px;">Artistic portrait with...</p>
                            <button class="btn-sm btn-primary">Test</button>
                        </div>
                        <div style="background: var(--gray-50); border-radius: 10px; padding: 12px;">
                            <div style="font-weight: 600; font-size: 0.85rem; margin-bottom: 5px;">#2 Lifestyle Cafe</div>
                            <p style="font-size: 0.75rem; color: var(--gray-500); margin-bottom: 10px;">Casual shot in coffee...</p>
                            <button class="btn-sm btn-primary">Test</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="admin-referrals">
            <h2>Admin: Referrals</h2>
            <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤, –≤—ã–≤–æ–¥—ã –∏ MTProto Telegram Affiliate.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">‚ú® Prompts</a>
                    <a href="#" class="admin-nav-item active">üéÅ Referrals</a>
                    <a href="#" class="admin-nav-item">üëë Partners</a>
                </div>
                <div class="admin-content">
                    <div class="tabs-row">
                        <span class="tab-badge active">Overview</span>
                        <span class="tab-badge">Referrers</span>
                        <span class="tab-badge">Withdrawals</span>
                        <span class="tab-badge">Telegram Affiliate</span>
                    </div>

                    <div class="kpi-grid" style="margin-top: 15px;">
                        <div class="kpi-card">
                            <div class="kpi-label">–í—Å–µ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</div>
                            <div class="kpi-value">847</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">–ö–æ–Ω–≤–µ—Ä—Å–∏—è</div>
                            <div class="kpi-value green">8.2%</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">–í—ã–ø–ª–∞—á–µ–Ω–æ</div>
                            <div class="kpi-value blue">‚ÇΩ 45,600</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">–û–∂–∏–¥–∞–µ—Ç –≤—ã–≤–æ–¥–∞</div>
                            <div class="kpi-value">‚ÇΩ 12,350</div>
                        </div>
                    </div>

                    <h4 style="margin-top: 20px;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤—ã–≤–æ–¥—ã</h4>
                    <table class="admin-table">
                        <thead>
                            <tr><th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th><th>–°—É–º–º–∞</th><th>–ö–∞—Ä—Ç–∞</th><th>–°—Ç–∞—Ç—É—Å</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>@top_referrer</td>
                                <td>‚ÇΩ 5,000</td>
                                <td>**** 4521</td>
                                <td><span class="status-badge status-pending">Pending</span></td>
                                <td>
                                    <button class="btn-sm btn-success">Approve</button>
                                    <button class="btn-sm btn-danger">Reject</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="admin-partners">
            <h2>Admin: Partners</h2>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–º–∏ –∑–∞—è–≤–∫–∞–º–∏: pending, approved, rejected, active.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">üéÅ Referrals</a>
                    <a href="#" class="admin-nav-item active">üëë Partners</a>
                    <a href="#" class="admin-nav-item">üí¨ Telegram</a>
                </div>
                <div class="admin-content">
                    <div class="tabs-row">
                        <span class="tab-badge">Pending (3)</span>
                        <span class="tab-badge active">Approved</span>
                        <span class="tab-badge">Rejected</span>
                        <span class="tab-badge">Active</span>
                    </div>

                    <table class="admin-table" style="margin-top: 15px;">
                        <thead>
                            <tr><th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th><th>Telegram</th><th>–†–µ—Ñ–µ—Ä–∞–ª–æ–≤</th><th>–î–æ—Ö–æ–¥</th><th>–ö–æ–º–∏—Å—Å–∏—è</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>@alexey_dev</td>
                                <td>‚úì Verified</td>
                                <td>156</td>
                                <td>‚ÇΩ 45,200</td>
                                <td><span class="badge badge-purple">50%</span></td>
                                <td><button class="btn-sm btn-secondary">Edit</button></td>
                            </tr>
                            <tr>
                                <td>@blogger_maria</td>
                                <td>‚úì Verified</td>
                                <td>89</td>
                                <td>‚ÇΩ 22,450</td>
                                <td><span class="badge badge-purple">50%</span></td>
                                <td><button class="btn-sm btn-secondary">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div style="background: var(--amber-100); border-radius: 10px; padding: 15px; margin-top: 20px;">
                        <h4 style="color: #b45309; margin-bottom: 10px;">Pending –∑–∞—è–≤–∫–∞</h4>
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <div>
                                <p style="font-weight: 600;">@new_blogger</p>
                                <p style="font-size: 0.8rem; color: var(--gray-600);">Instagram: 50K followers</p>
                            </div>
                            <div style="margin-left: auto; display: flex; gap: 8px;">
                                <button class="btn-sm btn-success">Approve</button>
                                <button class="btn-sm btn-danger">Reject</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="admin-telegram">
            <h2>Admin: Telegram</h2>
            <p>–†–∞—Å—Å—ã–ª–∫–∞ –≤ Telegram —Å —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–æ–º: all, paid, active, partners, specific.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">üëë Partners</a>
                    <a href="#" class="admin-nav-item active">üí¨ Telegram</a>
                    <a href="#" class="admin-nav-item">üé´ Support</a>
                </div>
                <div class="admin-content">
                    <h4>–ù–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞</h4>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 0.85rem; color: var(--gray-600); display: block; margin-bottom: 5px;">–ê—É–¥–∏—Ç–æ—Ä–∏—è</label>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 15px;">
                            <label style="display: flex; align-items: center; gap: 5px; background: var(--coral-500); color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; cursor: pointer;">
                                <input type="radio" name="audience" checked style="display: none;"> –í—Å–µ (1,247)
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; background: var(--gray-100); padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; cursor: pointer;">
                                <input type="radio" name="audience" style="display: none;"> –° –ø–æ–∫—É–ø–∫–∞–º–∏ (312)
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; background: var(--gray-100); padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; cursor: pointer;">
                                <input type="radio" name="audience" style="display: none;"> –ê–∫—Ç–∏–≤–Ω—ã–µ 7–¥ (89)
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; background: var(--gray-100); padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; cursor: pointer;">
                                <input type="radio" name="audience" style="display: none;"> –ü–∞—Ä—Ç–Ω—ë—Ä—ã (24)
                            </label>
                        </div>

                        <label style="font-size: 0.85rem; color: var(--gray-600); display: block; margin-bottom: 5px;">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                        <textarea style="width: 100%; height: 100px; border: 1px solid var(--gray-300); border-radius: 10px; padding: 12px; font-size: 0.9rem; resize: none;" placeholder="–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Markdown..."></textarea>

                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="btn-sm btn-secondary">üìé –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</button>
                            <button class="btn-sm btn-secondary">üîó –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É</button>
                            <button class="btn-sm btn-primary" style="margin-left: auto;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </div>
                    </div>

                    <h4 style="margin-top: 25px;">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫</h4>
                    <table class="admin-table">
                        <thead><tr><th>–î–∞—Ç–∞</th><th>–ê—É–¥–∏—Ç–æ—Ä–∏—è</th><th>–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead>
                        <tbody>
                            <tr>
                                <td>17 —è–Ω–≤, 10:00</td>
                                <td>–° –ø–æ–∫—É–ø–∫–∞–º–∏</td>
                                <td>298 / 312</td>
                                <td><span class="status-badge status-succeeded">Completed</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="admin-support">
            <h2>Admin: Support</h2>
            <p>Support —Ç–∏–∫–µ—Ç—ã —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –∏ SLA tracking.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">üí¨ Telegram</a>
                    <a href="#" class="admin-nav-item active">üé´ Support</a>
                    <a href="#" class="admin-nav-item">üìã Logs</a>
                </div>
                <div class="admin-content">
                    <div class="filters-row">
                        <select class="filter-select">
                            <option>–í—Å–µ —Ç–∏–∫–µ—Ç—ã</option>
                            <option>Open</option>
                            <option>In Progress</option>
                            <option>Resolved</option>
                        </select>
                        <select class="filter-select">
                            <option>–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                            <option>üî¥ High</option>
                            <option>üü° Medium</option>
                            <option>üü¢ Low</option>
                        </select>
                    </div>

                    <table class="admin-table">
                        <thead><tr><th>ID</th><th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th><th>–¢–µ–º–∞</th><th>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th><th>SLA</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead>
                        <tbody>
                            <tr>
                                <td>#T-142</td>
                                <td>@user_problem</td>
                                <td>–ü–ª–∞—Ç—ë–∂ –Ω–µ –ø—Ä–æ—à—ë–ª</td>
                                <td><span class="badge badge-red">High</span></td>
                                <td style="color: var(--red-500);">‚ö†Ô∏è 2—á –æ—Å—Ç–∞–ª–æ—Å—å</td>
                                <td><span class="status-badge status-processing">In Progress</span></td>
                            </tr>
                            <tr>
                                <td>#T-141</td>
                                <td>@question_user</td>
                                <td>–ö–∞–∫ —Å–∫–∞—á–∞—Ç—å —Ñ–æ—Ç–æ?</td>
                                <td><span class="badge badge-green">Low</span></td>
                                <td style="color: var(--green-500);">‚úì 12—á</td>
                                <td><span class="status-badge status-pending">Open</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="admin-logs">
            <h2>Admin: Logs</h2>
            <p>Sentry events –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —É—Ä–æ–≤–Ω—é.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">üé´ Support</a>
                    <a href="#" class="admin-nav-item active">üìã Logs</a>
                    <a href="#" class="admin-nav-item">‚öôÔ∏è Settings</a>
                </div>
                <div class="admin-content">
                    <div class="filters-row">
                        <select class="filter-select">
                            <option>–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
                            <option>üî¥ Error</option>
                            <option>üü° Warning</option>
                            <option>üîµ Info</option>
                        </select>
                        <select class="filter-select">
                            <option>–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
                            <option>API</option>
                            <option>Payments</option>
                            <option>Generation</option>
                            <option>Cron</option>
                        </select>
                        <input type="text" class="filter-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—é...">
                    </div>

                    <div style="background: var(--gray-900); border-radius: 10px; padding: 15px; font-family: monospace; font-size: 0.75rem; color: #e5e7eb; max-height: 250px; overflow-y: auto;">
                        <div style="margin-bottom: 8px;"><span style="color: #ef4444;">[ERROR]</span> <span style="color: #6b7280;">17:32:15</span> Payment webhook failed: Invalid signature</div>
                        <div style="margin-bottom: 8px;"><span style="color: #f59e0b;">[WARN]</span> <span style="color: #6b7280;">17:31:42</span> Kie.ai rate limit approaching (85%)</div>
                        <div style="margin-bottom: 8px;"><span style="color: #3b82f6;">[INFO]</span> <span style="color: #6b7280;">17:30:18</span> Generation completed: job_id=892</div>
                        <div style="margin-bottom: 8px;"><span style="color: #3b82f6;">[INFO]</span> <span style="color: #6b7280;">17:29:55</span> Payment succeeded: P-4521 (T-Bank)</div>
                        <div style="margin-bottom: 8px;"><span style="color: #f59e0b;">[WARN]</span> <span style="color: #6b7280;">17:28:30</span> TON transaction pending: 0x7a8b...</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="admin-settings">
            <h2>Admin: Settings</h2>
            <p>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–∏—Ñ–æ–≤, –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ —Å–∏—Å—Ç–µ–º—ã.</p>

            <div class="admin-mockup">
                <div class="admin-nav">
                    <a href="#" class="admin-nav-item">üìã Logs</a>
                    <a href="#" class="admin-nav-item active">‚öôÔ∏è Settings</a>
                </div>
                <div class="admin-content">
                    <div class="tabs-row">
                        <span class="tab-badge active">–¢–∞—Ä–∏—Ñ—ã</span>
                        <span class="tab-badge">–ü–ª–∞—Ç–µ–∂–∏</span>
                        <span class="tab-badge">AI</span>
                        <span class="tab-badge">Telegram</span>
                    </div>

                    <h4 style="margin-top: 20px;">Pricing Tiers</h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 10px;">
                        <div style="background: var(--gray-50); border-radius: 10px; padding: 15px;">
                            <div style="font-weight: 600; margin-bottom: 10px;">Starter</div>
                            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                                <div>
                                    <label style="font-size: 0.7rem; color: var(--gray-500);">–§–æ—Ç–æ</label>
                                    <input type="number" value="7" style="width: 60px; padding: 6px; border: 1px solid var(--gray-300); border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="font-size: 0.7rem; color: var(--gray-500);">–¶–µ–Ω–∞ ‚ÇΩ</label>
                                    <input type="number" value="499" style="width: 80px; padding: 6px; border: 1px solid var(--gray-300); border-radius: 6px;">
                                </div>
                            </div>
                        </div>
                        <div style="background: var(--gray-50); border-radius: 10px; padding: 15px; border: 2px solid var(--coral-500);">
                            <div style="font-weight: 600; margin-bottom: 10px;">Standard <span class="badge badge-pink">Popular</span></div>
                            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                                <div>
                                    <label style="font-size: 0.7rem; color: var(--gray-500);">–§–æ—Ç–æ</label>
                                    <input type="number" value="15" style="width: 60px; padding: 6px; border: 1px solid var(--gray-300); border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="font-size: 0.7rem; color: var(--gray-500);">–¶–µ–Ω–∞ ‚ÇΩ</label>
                                    <input type="number" value="799" style="width: 80px; padding: 6px; border: 1px solid var(--gray-300); border-radius: 6px;">
                                </div>
                            </div>
                        </div>
                        <div style="background: var(--gray-50); border-radius: 10px; padding: 15px;">
                            <div style="font-weight: 600; margin-bottom: 10px;">Premium</div>
                            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                                <div>
                                    <label style="font-size: 0.7rem; color: var(--gray-500);">–§–æ—Ç–æ</label>
                                    <input type="number" value="23" style="width: 60px; padding: 6px; border: 1px solid var(--gray-300); border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="font-size: 0.7rem; color: var(--gray-500);">–¶–µ–Ω–∞ ‚ÇΩ</label>
                                    <input type="number" value="1199" style="width: 80px; padding: 6px; border: 1px solid var(--gray-300); border-radius: 6px;">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <button class="btn-sm btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- API DOCUMENTATION -->
        <section id="api-user">
            <h2>User API</h2>

            <div class="feature-box">
                <h4>POST /api/user</h4>
                <p>–°–æ–∑–¥–∞–Ω–∏–µ/–ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID</p>
                <pre><code>// Request
{ "telegramUserId": 123456789 }

// Response
{
  "id": 42,
  "telegram_user_id": 123456789,
  "telegram_username": "user_name",
  "created_at": "2026-01-17T10:00:00Z"
}</code></pre>
            </div>

            <div class="feature-box">
                <h4>GET /api/user/avatars?telegram_user_id=123</h4>
                <p>–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
                <pre><code>// Response
{
  "avatars": [
    {
      "id": 1,
      "name": "Professional",
      "status": "ready",
      "thumbnail_url": "https://...",
      "photos_count": 15
    }
  ]
}</code></pre>
            </div>
        </section>

        <section id="api-payment">
            <h2>Payment API</h2>

            <div class="feature-box">
                <h4>POST /api/payment/create</h4>
                <p>–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (T-Bank, Stars, TON)</p>
                <pre><code>// Request
{
  "telegramUserId": 123456789,
  "tierId": "standard",
  "provider": "tbank",  // tbank | stars | ton
  "email": "user@email.com"
}

// Response (T-Bank)
{
  "paymentId": "P-4521",
  "confirmationUrl": "https://securepay.tinkoff.ru/...",
  "testMode": true
}

// Response (Stars)
{
  "paymentId": "P-4522",
  "starsAmount": 1598,
  "invoiceLink": "https://t.me/$..."
}

// Response (TON)
{
  "paymentId": "P-4523",
  "tonAmount": "2.5",
  "walletAddress": "UQ...",
  "comment": "pinglass_P-4523"
}</code></pre>
            </div>

            <div class="feature-box">
                <h4>GET /api/payment/status?payment_id=P-4521</h4>
                <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞</p>
                <pre><code>// Response
{
  "status": "succeeded",  // pending | succeeded | canceled | refunded
  "provider": "tbank",
  "amount": 799
}</code></pre>
            </div>

            <div class="feature-box">
                <h4>POST /api/payment/webhook/tbank</h4>
                <p>Webhook –æ—Ç T-Bank (SHA256 signature)</p>
            </div>

            <div class="feature-box">
                <h4>POST /api/payment/webhook/telegram</h4>
                <p>Webhook –æ—Ç Telegram Stars (HMAC-SHA256)</p>
            </div>
        </section>

        <section id="api-generation">
            <h2>Generation API</h2>

            <div class="feature-box">
                <h4>POST /api/generate</h4>
                <p>–ó–∞–ø—É—Å–∫ async –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–æ—Ç–æ</p>
                <pre><code>// Request
{
  "telegramUserId": 123456789,
  "avatarId": 1,
  "tierId": "standard"  // starter | standard | premium
}

// Response
{
  "jobId": 892,
  "status": "processing",
  "photosCount": 15
}</code></pre>
            </div>

            <div class="feature-box">
                <h4>GET /api/generate/status?job_id=892</h4>
                <p>–°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</p>
                <pre><code>// Response
{
  "jobId": 892,
  "status": "processing",  // processing | completed | failed
  "progress": {
    "completed": 10,
    "total": 15,
    "percentage": 67
  },
  "photos": [
    { "url": "https://...", "style": "business" },
    { "url": "https://...", "style": "creative" }
  ]
}</code></pre>
            </div>

            <div class="feature-box">
                <h4>POST /api/qstash/generate</h4>
                <p>QStash endpoint –¥–ª—è async –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (internal)</p>
            </div>
        </section>

        <section id="api-referral">
            <h2>Referral API</h2>

            <div class="feature-box">
                <h4>GET /api/referral/stats?telegram_user_id=123</h4>
                <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</p>
                <pre><code>// Response
{
  "referralCode": "ref_abc123",
  "referralLink": "t.me/pinglass_bot?start=ref_abc123",
  "balance": 2450,
  "totalEarned": 5600,
  "referralsCount": 24,
  "purchasesCount": 8,
  "commissionRate": 0.10,  // 0.50 for partners
  "isPartner": false
}</code></pre>
            </div>

            <div class="feature-box">
                <h4>POST /api/referral/withdraw</h4>
                <p>–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</p>
                <pre><code>// Request
{
  "telegramUserId": 123456789,
  "amount": 2000,
  "cardNumber": "4276****1234"
}

// Response
{
  "withdrawalId": "W-42",
  "status": "pending",
  "estimatedTime": "24-48 —á–∞—Å–æ–≤"
}</code></pre>
            </div>

            <div class="feature-box">
                <h4>POST /api/referral/apply-partner</h4>
                <p>–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ (50% –∫–æ–º–∏—Å—Å–∏—è)</p>
            </div>
        </section>

        <section id="api-admin">
            <h2>Admin API</h2>
            <p>–í—Å–µ admin endpoints —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (Neon Auth).</p>

            <table>
                <tr><th>Endpoint</th><th>–ú–µ—Ç–æ–¥</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                <tr><td><code>/api/admin/stats</code></td><td>GET</td><td>Dashboard KPI –º–µ—Ç—Ä–∏–∫–∏</td></tr>
                <tr><td><code>/api/admin/users</code></td><td>GET</td><td>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏</td></tr>
                <tr><td><code>/api/admin/users/[id]/ban</code></td><td>POST</td><td>–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</td></tr>
                <tr><td><code>/api/admin/payments</code></td><td>GET</td><td>–°–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π</td></tr>
                <tr><td><code>/api/admin/payments/[id]/refund</code></td><td>POST</td><td>–í–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–∞</td></tr>
                <tr><td><code>/api/admin/generations</code></td><td>GET</td><td>–°–ø–∏—Å–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π</td></tr>
                <tr><td><code>/api/admin/generations/[id]/retry</code></td><td>POST</td><td>–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</td></tr>
                <tr><td><code>/api/admin/referrals</code></td><td>GET</td><td>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</td></tr>
                <tr><td><code>/api/admin/withdrawals</code></td><td>GET</td><td>–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–≤–æ–¥</td></tr>
                <tr><td><code>/api/admin/withdrawals/[id]/approve</code></td><td>POST</td><td>–û–¥–æ–±—Ä–∏—Ç—å –≤—ã–≤–æ–¥</td></tr>
                <tr><td><code>/api/admin/partners</code></td><td>GET</td><td>–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –∑–∞—è–≤–∫–∏</td></tr>
                <tr><td><code>/api/admin/partners/[id]/approve</code></td><td>POST</td><td>–û–¥–æ–±—Ä–∏—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞</td></tr>
                <tr><td><code>/api/admin/telegram/broadcast</code></td><td>POST</td><td>Telegram —Ä–∞—Å—Å—ã–ª–∫–∞</td></tr>
                <tr><td><code>/api/admin/settings</code></td><td>GET/PUT</td><td>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</td></tr>
                <tr><td><code>/api/admin/pricing</code></td><td>GET/PUT</td><td>–¢–∞—Ä–∏—Ñ—ã</td></tr>
            </table>
        </section>

        <section id="components">
            <h2>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h2>

            <h3>Views (components/views/)</h3>
            <table>
                <tr><th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>Props</th></tr>
                <tr><td><code>OnboardingView</code></td><td>Welcome + Auth Modal</td><td>onComplete, isTelegramWebApp</td></tr>
                <tr><td><code>UploadView</code></td><td>–ó–∞–≥—Ä—É–∑–∫–∞ 5-8 —Ñ–æ—Ç–æ</td><td>persona, onNext, updatePersona</td></tr>
                <tr><td><code>TierSelectView</code></td><td>–í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞</td><td>pricingTiers, onSelectTier, onGenerate</td></tr>
                <tr><td><code>ResultsView</code></td><td>–ì–∞–ª–µ—Ä–µ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</td><td>persona, generationProgress</td></tr>
                <tr><td><code>DashboardView</code></td><td>–°–ø–∏—Å–æ–∫ –∞–≤–∞—Ç–∞—Ä–æ–≤</td><td>avatars, onCreateNew</td></tr>
                <tr><td><code>AvatarDetailView</code></td><td>–î–µ—Ç–∞–ª–∏ –ø–µ—Ä—Å–æ–Ω—ã</td><td>avatar, onGenerateMore</td></tr>
            </table>

            <h3>UI Components (components/ui/)</h3>
            <table>
                <tr><th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                <tr><td><code>PaymentModal</code></td><td>3 –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã, TonConnect</td></tr>
                <tr><td><code>ReferralPanel</code></td><td>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –≤—ã–≤–æ–¥</td></tr>
                <tr><td><code>MinimalCard</code></td><td>–ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞</td></tr>
                <tr><td><code>ResultsGallery</code></td><td>Lazy-loaded –≥–∞–ª–µ—Ä–µ—è</td></tr>
                <tr><td><code>ProgressCard</code></td><td>–ü—Ä–æ–≥—Ä–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</td></tr>
            </table>

            <h3>Admin Components (components/admin/)</h3>
            <table>
                <tr><th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                <tr><td><code>AdminNavigation</code></td><td>11 nav items</td></tr>
                <tr><td><code>Dashboard</code></td><td>KPI, –≥—Ä–∞—Ñ–∏–∫–∏</td></tr>
                <tr><td><code>UsersView</code></td><td>–¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</td></tr>
                <tr><td><code>PaymentsView</code></td><td>–ü–ª–∞—Ç–µ–∂–∏ + refund</td></tr>
                <tr><td><code>GenerationsView</code></td><td>–ü—Ä–æ–≥—Ä–µ—Å—Å + retry</td></tr>
                <tr><td><code>PromptTesterView</code></td><td>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤</td></tr>
                <tr><td><code>ReferralsView</code></td><td>4 –≤–∫–ª–∞–¥–∫–∏</td></tr>
                <tr><td><code>PartnersView</code></td><td>4 —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–æ–∫</td></tr>
                <tr><td><code>TelegramBroadcastView</code></td><td>–†–∞—Å—Å—ã–ª–∫–∞</td></tr>
                <tr><td><code>TicketsView</code></td><td>Support —Ç–∏–∫–µ—Ç—ã</td></tr>
                <tr><td><code>LogsView</code></td><td>Sentry events</td></tr>
                <tr><td><code>SettingsView</code></td><td>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</td></tr>
            </table>
        </section>

        <section id="pages">
            <h2>–°—Ç—Ä–∞–Ω–∏—Ü—ã (App Router)</h2>

            <table>
                <tr><th>Route</th><th>–§–∞–π–ª</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                <tr><td><code>/</code></td><td>app/page.tsx</td><td>–ì–ª–∞–≤–Ω–∞—è (PersonaApp)</td></tr>
                <tr><td><code>/payment/callback</code></td><td>app/payment/callback/page.tsx</td><td>T-Bank redirect</td></tr>
                <tr><td><code>/admin</code></td><td>app/admin/page.tsx</td><td>Admin Dashboard</td></tr>
                <tr><td><code>/admin/users</code></td><td>app/admin/users/page.tsx</td><td>Users management</td></tr>
                <tr><td><code>/admin/payments</code></td><td>app/admin/payments/page.tsx</td><td>Payments</td></tr>
                <tr><td><code>/admin/generations</code></td><td>app/admin/generations/page.tsx</td><td>Generations</td></tr>
                <tr><td><code>/admin/prompt-testing</code></td><td>app/admin/prompt-testing/page.tsx</td><td>Prompt tester</td></tr>
                <tr><td><code>/admin/referrals</code></td><td>app/admin/referrals/page.tsx</td><td>Referrals</td></tr>
                <tr><td><code>/admin/partners</code></td><td>app/admin/partners/page.tsx</td><td>Partners</td></tr>
                <tr><td><code>/admin/telegram</code></td><td>app/admin/telegram/page.tsx</td><td>Telegram broadcast</td></tr>
                <tr><td><code>/admin/tickets</code></td><td>app/admin/tickets/page.tsx</td><td>Support</td></tr>
                <tr><td><code>/admin/logs</code></td><td>app/admin/logs/page.tsx</td><td>Logs</td></tr>
                <tr><td><code>/admin/settings</code></td><td>app/admin/settings/page.tsx</td><td>Settings</td></tr>
            </table>
        </section>

        <section id="environment">
            <h2>Environment Variables</h2>

            <pre><code># Database (Required)
DATABASE_URL=postgresql://...

# AI Generation
KIE_API_KEY=...
REPLICATE_API_TOKEN=...

# Payments
TBANK_TERMINAL_KEY=...
TBANK_PASSWORD=...
TON_WALLET_ADDRESS=...

# Telegram
BOT_TOKEN=...
TELEGRAM_BOT_USERNAME=...

# Storage
R2_ACCESS_KEY_ID=...
R2_SECRET_ACCESS_KEY=...
R2_BUCKET=...
R2_ENDPOINT=...

# QStash
QSTASH_TOKEN=...
QSTASH_CURRENT_SIGNING_KEY=...

# Sentry
SENTRY_DSN=...

# App
NEXT_PUBLIC_APP_URL=https://pinglass.ru</code></pre>
        </section>

        <section id="deploy">
            <h2>–î–µ–ø–ª–æ–π</h2>

            <h3>Checklist</h3>
            <ul>
                <li>‚òê –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Å–µ environment variables –≤ Vercel</li>
                <li>‚òê –°–æ–∑–¥–∞—Ç—å PostgreSQL —Å—Ö–µ–º—É –≤ Neon</li>
                <li>‚òê –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å T-Bank –º–µ—Ä—á–∞–Ω—Ç</li>
                <li>‚òê –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Kie.ai API –∫–ª—é—á</li>
                <li>‚òê –°–æ–∑–¥–∞—Ç—å Telegram –±–æ—Ç–∞</li>
                <li>‚òê –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Cloudflare R2 bucket</li>
                <li>‚òê –ù–∞—Å—Ç—Ä–æ–∏—Ç—å QStash –æ—á–µ—Ä–µ–¥–∏</li>
                <li>‚òê –ü–æ–¥–∫–ª—é—á–∏—Ç—å Sentry –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</li>
                <li>‚òê –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å payment flow</li>
                <li>‚òê –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook URLs –≤ T-Bank</li>
            </ul>

            <h3>Vercel –∫–æ–º–∞–Ω–¥—ã</h3>
            <pre><code># Preview –¥–µ–ø–ª–æ–π
vercel

# Production –¥–µ–ø–ª–æ–π
vercel --prod

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è env
vercel env pull .env.local

# –õ–æ–≥–∏
vercel logs --follow</code></pre>
        </section>

        <!-- ==================== JANUARY 2026 UPDATES ==================== -->

        <!-- TEST BRANCH -->
        <section id="test-branch">
            <h2>Test Branch Updates (January 2026)</h2>
            <p>Test –≤–µ—Ç–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç <strong>66 –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤</strong> (+6,819/-450 —Å—Ç—Ä–æ–∫). –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏ –≥–æ—Ç–æ–≤—ã –∫ merge.</p>

            <h3>–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</h3>
            <table>
                <thead>
                    <tr><th>–§–∏—á–∞</th><th>–°—Ç–∞—Ç—É—Å</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                </thead>
                <tbody>
                    <tr><td>Edge Runtime</td><td style="color: #4ADE80;">‚úÖ Done</td><td>–ú–∏–≥—Ä–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö routes</td></tr>
                    <tr><td>CI/CD Pipeline</td><td style="color: #4ADE80;">‚úÖ Done</td><td>GitHub Actions + –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã</td></tr>
                    <tr><td>E2E Tests</td><td style="color: #4ADE80;">‚úÖ Done</td><td>10+ Playwright test specs</td></tr>
                    <tr><td>Partner Cabinet</td><td style="color: #4ADE80;">‚úÖ Done</td><td>6 —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤</td></tr>
                    <tr><td>Telegram-only Auth</td><td style="color: #4ADE80;">‚úÖ Done</td><td>–£–¥–∞–ª—ë–Ω Neon Auth</td></tr>
                    <tr><td>Dynamic Packs</td><td style="color: #4ADE80;">‚úÖ Done</td><td>–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞–∫–∏ –ø—Ä–æ–º–ø—Ç–æ–≤</td></tr>
                </tbody>
            </table>

            <h3>–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</h3>
            <ul>
                <li><code>AGENTS.md</code> ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI coding agents (303 —Å—Ç—Ä–æ–∫–∏)</li>
                <li><code>docs/ENV_VARIABLES.md</code> ‚Äî –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (403 —Å—Ç—Ä–æ–∫–∏)</li>
                <li><code>docs/PRESENTATION_PLAN.md</code> ‚Äî –ü–ª–∞–Ω –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ —Å GTM —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π</li>
            </ul>

            <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã</h3>
            <pre><code>d7a9028 fix: fetch photos from server when opening ready avatar
0a5141e fix: correct asset type from 'image' to 'PHOTO'
45ec708 fix: add telegram/send-photos to vercel.json maxDuration
ee3edd4 fix: add maxDuration to payment/upload/telegram routes
f761428 fix: migrate critical user-facing routes to Edge runtime</code></pre>
        </section>

        <!-- PARTNER CABINET -->
        <section id="partner-cabinet">
            <h2>Partner Cabinet</h2>
            <p>–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π. –ü–∞—Ä—Ç–Ω—ë—Ä—ã –ø–æ–ª—É—á–∞—é—Ç <strong>50% –∫–æ–º–∏—Å—Å–∏–∏</strong> (vs 10% –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).</p>

            <h3>6 —Å—Ç—Ä–∞–Ω–∏—Ü Partner Cabinet</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üìä Dashboard</h4>
                    <ul>
                        <li>KPI –∫–∞—Ä—Ç–æ—á–∫–∏: –±–∞–ª–∞–Ω—Å, –¥–æ—Ö–æ–¥, —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</li>
                        <li>–ì—Ä–∞—Ñ–∏–∫ –¥–æ—Ö–æ–¥–æ–≤ –∑–∞ 30 –¥–Ω–µ–π</li>
                        <li>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è</li>
                        <li>Quick actions</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>üí∞ Earnings</h4>
                    <ul>
                        <li>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏</li>
                        <li>–°—Ç–∞—Ç—É—Å: pending/credited/cancelled</li>
                        <li>–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>üë• Referrals</h4>
                    <ul>
                        <li>–°–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö</li>
                        <li>–ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</li>
                        <li>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—É</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>üí≥ Withdrawals</h4>
                    <ul>
                        <li>–ú–∏–Ω–∏–º—É–º: 5,000 ‚ÇΩ</li>
                        <li>–ù–î–§–õ 13% –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</li>
                        <li>–ú–µ—Ç–æ–¥—ã: Card, –°–ë–ü</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>üì¶ Packs</h4>
                    <ul>
                        <li>–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞–∫–∏ –ø—Ä–æ–º–ø—Ç–æ–≤</li>
                        <li>–ü—É–±–ª–∏—á–Ω—ã–µ/–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ</li>
                        <li>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>‚öôÔ∏è Settings</h4>
                    <ul>
                        <li>–ü—Ä–æ—Ñ–∏–ª—å –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</li>
                        <li>–†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –≤—ã–ø–ª–∞—Ç</li>
                        <li>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</li>
                    </ul>
                </div>
            </div>

            <h3>Partner API Endpoints</h3>
            <table>
                <thead>
                    <tr><th>Endpoint</th><th>–ú–µ—Ç–æ–¥</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                </thead>
                <tbody>
                    <tr><td><code>/api/partner/stats</code></td><td>GET</td><td>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞</td></tr>
                    <tr><td><code>/api/partner/earnings</code></td><td>GET</td><td>–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π</td></tr>
                    <tr><td><code>/api/partner/apply</code></td><td>POST</td><td>–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ</td></tr>
                    <tr><td><code>/api/referral/withdraw</code></td><td>POST</td><td>–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥</td></tr>
                    <tr><td><code>/api/packs</code></td><td>CRUD</td><td>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–∞–º–∏</td></tr>
                </tbody>
            </table>

            <h3>Deferred Earnings Flow</h3>
            <p>–ó–∞—â–∏—Ç–∞ –æ—Ç chargebacks: –∫–æ–º–∏—Å—Å–∏—è –∑–∞—á–∏—Å–ª—è–µ—Ç—Å—è –ü–û–°–õ–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.</p>
            <pre><code>Payment Succeeded ‚Üí status: 'pending' (–±–∞–ª–∞–Ω—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
                      ‚Üì
Generation Complete ‚Üí status: 'credited' (–±–∞–ª–∞–Ω—Å +)
                      ‚Üì (–µ—Å–ª–∏ refund –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)
Refund Before Gen ‚Üí status: 'cancelled' (–±–∞–ª–∞–Ω—Å 0)</code></pre>
        </section>

        <!-- EDGE RUNTIME -->
        <section id="edge-runtime">
            <h2>Edge Runtime Migration</h2>
            <p>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ user-facing routes –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ Edge Runtime –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞.</p>

            <h3>–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ routes</h3>
            <table>
                <thead>
                    <tr><th>Route</th><th>maxDuration</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                </thead>
                <tbody>
                    <tr><td><code>/api/payment/create</code></td><td>30s</td><td>–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞</td></tr>
                    <tr><td><code>/api/payment/status</code></td><td>30s</td><td>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞</td></tr>
                    <tr><td><code>/api/upload</code></td><td>30s</td><td>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ</td></tr>
                    <tr><td><code>/api/telegram/send-photos</code></td><td>60s</td><td>–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram</td></tr>
                </tbody>
            </table>

            <h3>vercel.json</h3>
            <pre><code>{
  "functions": {
    "app/api/payment/**/*.ts": { "maxDuration": 30 },
    "app/api/upload/**/*.ts": { "maxDuration": 30 },
    "app/api/telegram/**/*.ts": { "maxDuration": 60 },
    "app/api/jobs/process/route.ts": { "maxDuration": 60 },
    "app/api/cron/poll-kie-tasks/route.ts": { "maxDuration": 55 }
  }
}</code></pre>

            <h3>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</h3>
            <ul>
                <li>~50% –±—ã—Å—Ç—Ä–µ–µ cold starts</li>
                <li>–ú–µ–Ω—å—à–µ latency –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
                <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                <li>–ì–ª–æ–±–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç—Ä–∏–±—É—Ü–∏—è</li>
            </ul>
        </section>

        <!-- CI/CD PIPELINE -->
        <section id="ci-cd">
            <h2>CI/CD Pipeline</h2>
            <p>GitHub Actions workflow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.</p>

            <h3>Workflow</h3>
            <pre><code># .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main, test]
  pull_request:
    branches: [main]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v2
      - run: pnpm install && pnpm lint

  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: pnpm install && pnpm test

  e2e:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: pnpm install && npx playwright install
      - run: pnpm test:e2e</code></pre>

            <h3>E2E Test Specs</h3>
            <table>
                <thead>
                    <tr><th>Spec</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                </thead>
                <tbody>
                    <tr><td><code>auth.spec.ts</code></td><td>Telegram authentication flow</td></tr>
                    <tr><td><code>upload.spec.ts</code></td><td>Photo upload functionality</td></tr>
                    <tr><td><code>payment.spec.ts</code></td><td>Payment flows (T-Bank, Stars)</td></tr>
                    <tr><td><code>generation.spec.ts</code></td><td>AI generation status</td></tr>
                    <tr><td><code>partner-cabinet.spec.ts</code></td><td>Partner dashboard</td></tr>
                </tbody>
            </table>

            <h3>–ú–µ—Ç—Ä–∏–∫–∏</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">~75%</div>
                    <div class="stat-label">Test Coverage</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">10+</div>
                    <div class="stat-label">E2E Specs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">35</div>
                    <div class="stat-label">API Routes</div>
                </div>
            </div>
        </section>
    </main>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });

        // Active nav highlighting
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', function() {
                document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>
</html>
